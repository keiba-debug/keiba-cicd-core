# TARGET frontier JV データファイル解析

## 概要

本ドキュメントは、TARGET frontier JVが保持するローカルデータファイルの構造を解析し、
データ活用の可能性を検討するためのものです。

TARGETはJRA-VAN Data Lab.からデータを取得し、独自形式で保存しています。
これらのデータを解析できれば、DB構築なしでJRA-VANデータを活用できます。

## 参考資料

- [TARGET FAQ - 技術情報](https://targetfaq.jra-van.jp/)
- JRA-VAN Data Lab. SDK Ver4.9.0.2
  - `JV-Data仕様書_4.9.0.1.pdf`
  - `JVData_Struct.cs`（C#構造体）

---

## 1. TARGETデータフォルダ構造

### 1.1 フォルダ一覧（Y:\ = TARGETデータドライブ）

| フォルダ | 内容 | ファイル数 | ステータス |
|---------|------|----------|----------|
| `CK_DATA\` | 調教データ（HC坂路/WCウッド） | 17,210 | ✅ 解析完了 |
| `BR_DATA\` | 生産者マスター | 20 | ✅ 解析完了 |
| `BS_DATA\` | セリ情報（HS） | 311 | ⚠️ スパースファイル |
| `BY_DATA\` | 馬名由来（HY） | 276 | ⚠️ スパースファイル |
| `CS_DATA\` | コース解説 | 143 | ✅ 解析完了 |
| `_SHISU_ST\` | TARGET独自指数 | 42,860 | ✅ 解析完了 |
| `_SHISU_SP\` | TARGET独自指数 | 2,951 | ✅ 解析完了 |

### 1.2 その他の主要ファイル

| ファイル | 内容 | ステータス |
|---------|------|----------|
| `KISI.DAT` | 騎手データ | ⚠️ バイナリ形式 |
| `CHOK.DAT` | 調教師データ | ⚠️ バイナリ形式 |
| `TFJV.INI` | TARGET設定ファイル | ⏸️ 未解析 |

**注意**: `TFJ_*.DAT`/`TFJ_*.IDX`ファイルは現在0バイト（空ファイル）

### 1.3 BR_DATA（生産者マスター）✅ 解析完了

| ファイル形式 | 内容 | 例 |
|-------------|------|-----|
| `TFJ_BRXX.DAT` | XX年生まれ馬の生産者 | TFJ_BR26.DAT (573KB) |
| `TFJ_BRXX.IDX` | インデックス | TFJ_BR26.IDX (8KB) |

**JRA-VAN対応**: `JV_BR_BREEDER`構造体（545バイト/レコード）

**フィールド構造**:
```
位置1-11  : レコードヘッダー (BR2 + 日付)
位置12-19 : 生産者コード (8桁)
位置20-91 : 生産者名（法人格有） (72バイト)
位置92-163: 生産者名（法人格無） (72バイト)
位置164-235: 生産者名カナ (72バイト)
位置236-403: 生産者名欧字 (168バイト)
位置404-423: 住所 (20バイト)
位置424-543: 成績情報 (120バイト = 60 x 2)
```

**サンプル（上島牧場）**:
```
BR22026010260000000上島牧場　　　　　　　　　　　　　　　　上島牧場　　　...
```

### 1.4 _SHISU_ST / _SHISU_SP（TARGET独自指数）✅ 解析完了

TARGETが計算した独自の指数データ（約45,000ファイル）

#### 指数種別一覧

| プレフィックス | 内容 | 用途 |
|---------------|------|------|
| `ato_stime` | 後半3Fタイム指数 | 上がり性能 |
| `mae_stime` | 前半タイム指数 | 前半性能 |
| `gokei` | 合計指数 | 総合評価 |
| `jikyu` | 持久力指数 | スタミナ |
| `jizoku` | 持続力指数 | ペース維持 |
| `shunpatsu` | 瞬発力指数 | 加速力 |
| `senko` | 先行力指数 | 前半位置取り |
| `tsuiso` | 追走力指数 | 追い込み |
| `tenkai` | 展開指数 | レース展開適性 |
| `siagari` | 仕上がり指数 | 調子 |
| `st` | スピード指数 | 基本能力 |
| `sav` | 平均指数 | 安定性 |
| `bias` | バイアス値 | 馬場傾向 |
| `*_mark` | 印付きデータ | 評価ランク |

#### CSV形式

```csv
レースID,指数値,着順
0120240101,12,1
0120240102,-6,6
```

**レースID**: `場コード(2) + 年(4) + 月(2) + レース番号(2)`

### 1.5 BS_DATA（セリ情報）⚠️ スパースファイル

| 形式 | 内容 |
|------|------|
| フォルダ | 年別（1995年〜現在） |
| ファイル | `BSYYYY#.DAT` (0-9) |
| JRA-VAN対応 | `JV_HS_SALE`（200バイト/レコード）|

**注意**: ディレクトリ表示ではサイズがあるが、実際は**スパースファイル**（0バイト）
→ TARGETがファイル領域を予約しているが、データは別の方法で管理

**JV_HS_SALE構造**:
- 血統登録番号、父馬/母馬繁殖登録番号
- 主催者・市場コード、市場名称
- 開催期間、取引時年齢、取引価格

### 1.6 BY_DATA（馬名由来）⚠️ スパースファイル

| 形式 | 内容 |
|------|------|
| フォルダ | 年別（1996年〜現在） |
| ファイル | `BYYYYY#.DAT` (0-9) |
| JRA-VAN対応 | `JV_HY_BAMEIORIGIN`（123バイト/レコード）|

**注意**: BS_DATAと同様、スパースファイル

**JV_HY_BAMEIORIGIN構造**:
- 血統登録番号 (10桁)
- 馬名 (36バイト)
- 馬名の意味由来 (64バイト)

### 1.7 CS_DATA（コース情報）✅ 解析完了 ⭐ WebViewer連携候補

コース別の解説テキストと画像データ（JRA-VAN `JV_CS_COURSE`相当）

| ファイル形式 | 内容 | 例 |
|-------------|------|-----|
| `CE{場}{距離}{コース}{日付}.TXT` | コース解説 | CE0612001819860101.TXT |
| `CE{場}{距離}{コース}{日付}.gif` | コース画像 | CE0612001719860101.gif |

**ファイル名構成**:
```
CE + 場コード(2) + 距離(4) + コース種別(2) + 日付(8) + 拡張子
例: CE0612001819860101.TXT
    CE=コース情報
    06=中山
    1200=1200m
    18=芝外回り
    19860101=適用開始日
```

**解説内容サンプル（中山芝1200m）**:
```
2コーナー過ぎきって正面直線に入ったところがスタート地点。
...コース設定はA、B、Cの3パターン。
...内枠差し有利。最後の直線差し切るには相当の力が必要...
クラス別ラップタイムあり。
```

**活用可能性**: WebViewerの競馬場コースデータと連携可能

---

## 2. CK_DATAフォルダ詳細

### 2.1 ディレクトリ構造

```
CK_DATA/
├── 2003/
│   ├── 200301/
│   │   ├── WC120030101.DAT
│   │   ├── WC020030101.DAT
│   │   ├── HC120030101.DAT
│   │   └── HC020030101.DAT
│   ├── 200302/
│   └── ...
├── 2004/
└── ...
└── 2026/
    └── 202601/
        ├── WC120260116.DAT
        └── ...
```

### 2.2 ファイル名の命名規則

```
{種別}{タイプ}{YYYYMMDD}.DAT

- 種別: WC, HC
- タイプ: 0, 1
- 日付: YYYYMMDD形式
```

| ファイル種別 | 行長 | 推測される内容 |
|-------------|-----|---------------|
| WC0 | 未測定 | 週間調教（タイプ0） |
| WC1 | 92バイト | 週間調教（タイプ1） |
| HC0 | 47バイト | 馬別調教（タイプ0） |
| HC1 | 未測定 | 馬別調教（タイプ1） |

---

## 3. データ構造解析

### 3.1 WC1ファイル（92バイト/行）

サンプルデータ（WC120260116.DAT 1行目）:
```
12026011606582019104800200000000014192051214194102016908511540697155054216303791510228118110
│└───┬──┘└┬─┘└───┬────┘└──────────────────────────────────────────────────────────┘
│   日付   時刻  血統登録番号               調教タイムデータ？
フラグ
```

#### 推測されるフィールド配置

| 位置 | 長さ | フィールド名 | 例 | 備考 |
|------|-----|-------------|-----|------|
| 1 | 1 | フラグ | `1` | 0/1 |
| 2-9 | 8 | 日付 | `20260116` | YYYYMMDD |
| 10-13 | 4 | 時刻 | `0658` | HHMM（調教開始時刻？） |
| 14-23 | 10 | 血統登録番号 | `2019104800` | JRA-VAN形式 |
| 24-92 | 69 | 調教データ | - | タイム、コース等 |

### 3.2 HC0ファイル（47バイト/行）

サンプルデータ（HC020260102.DAT 1行目）:
```
02026010206572020101174066316804951670328164164
│└───┬──┘└┬─┘└───┬────┘└──────────────────────┘
│   日付   時刻  血統登録番号     タイムデータ？
フラグ
```

#### 推測されるフィールド配置

| 位置 | 長さ | フィールド名 | 例 | 備考 |
|------|-----|-------------|-----|------|
| 1 | 1 | フラグ | `0` | 0/1 |
| 2-9 | 8 | 日付 | `20260102` | YYYYMMDD |
| 10-13 | 4 | 時刻 | `0657` | HHMM |
| 14-23 | 10 | 血統登録番号 | `2020101174` | JRA-VAN形式 |
| 24-47 | 24 | 調教データ | - | サマリ情報 |

---

## 4. JRA-VAN Data Lab. 公式仕様

### 4.1 血統登録番号（KettoNum）

JRA-VAN仕様:
- 10桁の数字
- 形式: `YYYYNNNNNN`
  - YYYY: 生年
  - NNNNNN: 連番

TARGETファイル内での血統登録番号:
- 位置14-23（10桁）
- JRA-VAN仕様と同じ形式

### 4.2 トレセン区分（TresenKubun）

JRA-VAN仕様:
| コード | トレセン |
|-------|---------|
| 1 | 栗東 |
| 2 | 美浦 |

TARGETファイルでの対応（推測）:
| ファイル名末尾 | データ内コード | トレセン |
|---------------|---------------|---------|
| WC1, HC1 | `1` | 栗東 |
| WC0, HC0 | `0` | 美浦 |

### 4.3 JV_WC_WOOD（ウッドチップ調教）構造体

JRA-VAN SDK定義（全長105バイト）:

| 位置 | 長さ | フィールド名 | 内容 |
|------|-----|--------------|------|
| 1-11 | 11 | head | レコードヘッダー |
| 12 | 1 | TresenKubun | トレセン区分 |
| 13-20 | 8 | ChokyoDate | 調教年月日 (YYYYMMDD) |
| 21-24 | 4 | ChokyoTime | 調教時刻 (HHMM) |
| 25-34 | 10 | KettoNum | 血統登録番号 |
| 35 | 1 | Course | コース |
| 36 | 1 | BabaAround | 馬場周り |
| 37 | 1 | reserved | 予備 |
| 38-41 | 4 | HaronTime10 | 10ハロン(2000m)タイム |
| 42-44 | 3 | LapTime10 | ラップ(2000m-1800m) |
| ... | ... | ... | ... |
| 80-83 | 4 | HaronTime4 | 4ハロン(800m)タイム |
| 84-86 | 3 | LapTime4 | ラップ(800m-600m) |
| 87-90 | 4 | HaronTime3 | 3ハロン(600m)タイム |
| 91-93 | 3 | LapTime3 | ラップ(600m-400m) |
| 94-97 | 4 | HaronTime2 | 2ハロン(400m)タイム |
| 98-100 | 3 | LapTime2 | ラップ(400m-200m) |
| 101-103 | 3 | LapTime1 | ラップ(200m-0m) |
| 104-105 | 2 | crlf | 改行 |

### 4.4 JV_HC_HANRO（坂路調教）構造体

JRA-VAN SDK定義（全長60バイト）:

| 位置 | 長さ | フィールド名 | 内容 |
|------|-----|--------------|------|
| 1-11 | 11 | head | レコードヘッダー |
| 12 | 1 | TresenKubun | トレセン区分 |
| 13-20 | 8 | ChokyoDate | 調教年月日 (YYYYMMDD) |
| 21-24 | 4 | ChokyoTime | 調教時刻 (HHMM) |
| 25-34 | 10 | KettoNum | 血統登録番号 |
| 35-38 | 4 | HaronTime4 | 4ハロン(800m)タイム |
| 39-41 | 3 | LapTime4 | ラップ(800m-600m) |
| 42-45 | 4 | HaronTime3 | 3ハロン(600m)タイム |
| 46-48 | 3 | LapTime3 | ラップ(600m-400m) |
| 49-52 | 4 | HaronTime2 | 2ハロン(400m)タイム |
| 53-55 | 3 | LapTime2 | ラップ(400m-200m) |
| 56-58 | 3 | LapTime1 | ラップ(200m-0m) |
| 59-60 | 2 | crlf | 改行 |

### 4.5 調教コースコード（推測）

TARGETのHC1ファイル解析より判明した位置24-25のコード:

| コード | 推測されるコース |
|-------|----------------|
| 05 | 坂路A？ |
| 06 | ウッドチップ？ |
| 07 | ダート？ |
| 08 | 芝？ |
| 20 | 栗東坂路？ |
| 30 | 美浦坂路？ |

---

## 5. TARGETファイルとJRA-VAN仕様のマッピング

### 5.1 フォーマットの違い

| 項目 | JRA-VAN (WC_WOOD) | TARGET (WC1) | 差異 |
|------|-------------------|--------------|------|
| 行長 | 105バイト | 92バイト | -13バイト |
| ヘッダー | 11バイト | なし？ | ヘッダー省略 |
| 改行 | 2バイト (CRLF) | なし？ | 改行省略 |

→ **TARGETはJRA-VANデータからヘッダーと改行を省略して保存していると推測**

### 5.2 WC1ファイル構造（推測確定版）

JRA-VAN WC_WOODからヘッダー(11バイト)+CRLF(2バイト)を除くと93バイト。
実際のWC1は92バイト。1バイトの差異は予備フィールドの省略か。

```
TARGETのWC1ファイル（92バイト）
├── フラグ(1)        : 位置1     = トレセン区分
├── 日付(8)          : 位置2-9   = ChokyoDate
├── 時刻(4)          : 位置10-13 = ChokyoTime
├── 血統登録番号(10) : 位置14-23 = KettoNum
├── コース(2)        : 位置24-25 = Course + BabaAround
├── 予備(9)          : 位置26-34 = reserved + α
└── タイムデータ(58) : 位置35-92 = 10ハロン〜1ハロンのタイム
```

### 5.3 タイムデータの解析

サンプルデータ: `4192051214194102016908511540697155054216303791510228118110`（58バイト）

4バイト+3バイトの繰り返しで分解:

| ハロン | 合計タイム | ラップタイム | 推定秒数 |
|--------|----------|-------------|---------|
| 10F | 無し | 無し | - |
| 9F | 無し | 無し | - |
| ... | ... | ... | - |
| 4F | `5540` | `697` | 55.4秒, 6.97秒?? |
| 3F | `4216` | `379` | 42.16秒??, 37.9秒?? |

※タイムの単位は1/10秒で、4桁=秒.コンマ1桁（例: 5540 = 55.40秒）

---

## 6. 解析の進め方

### 6.1 Phase 1: フォーマット確定（現在進行中）

- [x] WC1/WC0ファイルの基本構造特定
- [x] HC1/HC0ファイルの基本構造特定
- [x] JRA-VAN SDKの構造体仕様との照合
- [ ] TARGETのCSV出力機能と照合（タイムデータの正確な位置特定）
- [ ] 解析結果をこのドキュメントに追記

### 6.2 Phase 2: パーサー実装 ✅ 完了

1. [x] Python調教データパーサーの作成 (`tools/target_data_parser.py`)
2. [x] JSON/CSV形式への変換
3. [ ] 既存データ（競馬ブック）との照合

### 6.3 Phase 3: 活用

1. [ ] WebViewerへの統合
2. [ ] 必要に応じてDB化

---

## 7. Pythonパーサー使用方法

### 7.1 target_data_parser.py

坂路調教データ（HCファイル）を読み込むパーサー。

#### 基本使用例

```bash
# 特定日の全調教データをJSON出力
python tools/target_data_parser.py --date 20260116 --output json

# 特定馬の調教データをCSV出力
python tools/target_data_parser.py --date 20260102 --ketto 2020101174 --output csv

# 栗東のみ
python tools/target_data_parser.py --date 20260116 --tresen 1 --output json

# ファイルに出力
python tools/target_data_parser.py --date 20260116 --output json --file training.json
```

#### 出力サンプル（JSON）

```json
{
  "tresen": "0",
  "date": "20260102",
  "time": "0657",
  "ketto_num": "2020101174",
  "time_4f": 66.3,
  "lap_4": 16.8,
  "time_3f": 49.5,
  "lap_3": 16.7,
  "time_2f": 32.8,
  "lap_2": 16.4,
  "lap_1": 16.4,
  "tresen_name": "美浦",
  "formatted_date": "2026/01/02",
  "formatted_time": "06:57"
}
```

---

## 7. TARGETのCSV出力機能

TARGETには各種データをCSVで出力する機能があります。
これを利用して、固定長ファイルの各フィールドを特定できます。

### 確認すべきCSV出力

- 出馬表CSV
- 成績CSV
- 調教CSV
- 馬情報CSV

### CSVとDATファイルの照合方法

1. 特定の馬・特定日の調教データをCSV出力
2. 同日のCK_DATAファイルを確認
3. 血統登録番号で行を特定
4. CSVの各項目と固定長フィールドを照合

---

## 8. DB化の判断基準

### 8.1 TARGETファイル活用 vs DB化の判断

| データ種別 | TARGETファイル活用 | DB化推奨 |
|-----------|------------------|---------|
| 調教データ（CK_DATA） | ✅ 解析で対応可能 | 不要 |
| 過去レース成績 | ✅ 既存race_info.json活用 | 大量検索時は検討 |
| 馬プロファイル | ✅ 既存Markdown活用 | 不要 |
| オッズ時系列 | ❌ TARGETに無い | 必要（JRA-VAN直接） |
| リアルタイム情報 | ❌ TARGETに無い | 必要（JRA-VAN直接） |

### 8.2 推奨アプローチ

1. **Phase 1**: TARGETファイル活用で実現可能な機能を実装
2. **Phase 2**: 不足データ（オッズ等）のみJRA-VAN連携でDB化
3. **Phase 3**: パフォーマンス問題が発生した場合に全面DB化を検討

---

## 9. 注意事項

### 9.1 著作権・利用規約

- TARGETのデータはJRA-VAN Data Lab.から取得されたもの
- 個人利用の範囲内での活用を想定
- データの再配布は禁止

### 9.2 データの信頼性

- TARGETが正常に動作している限り、データは信頼できる
- ファイル破損時の検出方法は未確立

---

## 11. 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-01-19 | 初版作成。HCファイル（坂路調教）の完全解析完了。Pythonパーサー作成。全データフォルダの調査完了。 |

---

## 付録: クイックリファレンス

### A. TARGETデータファイルの早見表

| ファイル | 行長 | 内容 | トレセン |
|---------|-----|------|---------|
| WC1*.DAT | 92バイト | ウッドチップ調教 | 栗東 |
| WC0*.DAT | 92バイト | ウッドチップ調教 | 美浦 |
| HC1*.DAT | 47バイト | 坂路調教 | 栗東 |
| HC0*.DAT | 47バイト | 坂路調教 | 美浦 |

### B. 共通フィールド位置

| 位置 | 長さ | 内容 |
|------|-----|------|
| 1 | 1 | トレセン区分 (1=栗東, 0=美浦) |
| 2-9 | 8 | 調教日 (YYYYMMDD) |
| 10-13 | 4 | 調教時刻 (HHMM) |
| 14-23 | 10 | 血統登録番号 |

### C. HC（坂路調教）タイムデータ構造 ✅ 確定

| 位置 | 長さ | 内容 | 単位 |
|------|-----|------|------|
| 24-27 | 4 | 4F(800m)合計タイム | 1/10秒 (例: 0663 = 66.3秒) |
| 28-30 | 3 | 800m-600mラップ | 1/10秒 (例: 168 = 16.8秒) |
| 31-34 | 4 | 3F(600m)合計タイム | 1/10秒 |
| 35-37 | 3 | 600m-400mラップ | 1/10秒 |
| 38-41 | 4 | 2F(400m)合計タイム | 1/10秒 |
| 42-44 | 3 | 400m-200mラップ | 1/10秒 |
| 45-47 | 3 | 最終1F(200m-0m)ラップ | 1/10秒 |

**検証済み**: 合計タイム - 次の合計タイム = ラップタイム が成立

#### ✅ 照合済み例: ユキマル 2026/01/02 6:57 美浦坂路

| 項目 | パーサー出力 | TARGET表示 | 結果 |
|------|------------|-----------|------|
| 4F合計 | 66.3秒 | 66.3 | ✅ |
| 3F合計 | 49.5秒 | 49.5 | ✅ |
| 2F合計 | 32.8秒 | 32.8 | ✅ |
| 1F | 16.4秒 | 16.4 | ✅ |
| Lap4 | 16.8秒 | 16.8 | ✅ |
| Lap3 | 16.7秒 | 16.7 | ✅ |
| Lap2 | 16.4秒 | 16.4 | ✅ |
| 時刻 | 06:57 | 6:57 | ✅ |

**馬情報**:
- 馬名: ユキマル (Yukimaru)
- 血統登録番号: `2020101174`

### D. WC（ウッドチップ/コース調教）タイムデータ構造 ✅ 確定

| 位置 | 長さ | 内容 | 例 |
|------|-----|------|-----|
| 24-25 | 2 | コースタイプ | 31=美浦D左 等 |
| 26-34 | 9 | 予備 | `000000000` |
| 35-92 | 58 | タイムデータ | 下記参照 |

#### タイムデータ構造（58バイト）

```
位置35-54 (20バイト): 10F〜7Fのタイム（未使用は0埋め）
位置55-92 (38バイト): 6F〜1Fのタイム
形式: [合計4桁][ラップ3桁] × 繰り返し + 最終1F3桁
```

#### ✅ 照合済み例: ユキマル 2026/01/12 4:00 美浦D左

| 抽出値 | 意味 | TARGET表示 | 結果 |
|-------|------|-----------|------|
| `0833` | 6F合計 | 83.3秒 | ✅ |
| `158` | Lap5 | 15.8秒 | ✅ |
| `0675` | 5F合計 | 67.5秒 | ✅ |
| `146` | Lap4 | 14.6秒 | ✅ |
| `0529` | 4F合計 | 52.9秒 | ✅ |
| `146` | Lap3 | 14.6秒 | ✅ |
| `0383` | 3F合計 | 38.3秒 | ✅ |
| `143` | Lap2 | 14.3秒 | ✅ |
| `0240` | 2F合計 | 24.0秒 | ✅ |
| `123` | Lap1 | 12.3秒 | ✅ |
| `117` | 最終1F | 11.7秒 | ✅ |

#### コースコード（位置24-25）

| コード | コース | 備考 |
|-------|-------|------|
| 20 | 栗東坂路 | 要確認 |
| 30 | 美浦坂路 | 要確認 |
| 31 | 美浦D左 | ダートコース左回り（確認済） |
| その他 | 要調査 | |

### E. JRA-VAN 調教コースコード

| コード | コース |
|-------|-------|
| 1 | ウッドチップ（栗東） |
| 2 | 坂路（栗東） |
| 3 | ウッドチップ（美浦） |
| 4 | 坂路（美浦） |
| 5 | ダートコース |
| 6 | 芝コース |
| 7 | ポリトラック |
| 8 | プール |

---

## 5. 解析サマリー

### 5.1 解析ステータス一覧

| データ種別 | フォルダ/ファイル | ステータス | 活用可能性 |
|-----------|-----------------|----------|----------|
| 坂路調教 | `CK_DATA/HC*.DAT` | ✅ 完了 | ⭐⭐⭐ 即時活用可 |
| コース調教 | `CK_DATA/WC*.DAT` | ✅ 完了 | ⭐⭐⭐ 即時活用可 |
| 生産者マスター | `BR_DATA/TFJ_BR*.DAT` | ✅ 完了 | ⭐⭐ パーサー実装待ち |
| コース解説 | `CS_DATA/*.TXT` | ✅ 完了 | ⭐⭐⭐ WebViewer連携 |
| TARGET指数 | `_SHISU_*/` | ✅ 完了 | ⭐⭐⭐ CSV直接利用可 |
| セリ情報 | `BS_DATA/` | ⚠️ スパース | ❌ データなし |
| 馬名由来 | `BY_DATA/` | ⚠️ スパース | ❌ データなし |
| 騎手/調教師 | `KISI.DAT`等 | ⚠️ バイナリ | ⏸️ 追加解析必要 |

### 5.2 即時活用可能データ

#### 調教データ（CK_DATA）
- **坂路（HC）**: 47バイト固定長、4F〜1Fタイム
- **コース（WC）**: 92バイト固定長、10F〜1Fタイム
- **パーサー**: `target_data_parser.py` 実装済み
- **照合**: ユキマル（2020101174）で100%一致確認

#### TARGET指数（_SHISU_ST/_SHISU_SP）
- **形式**: CSV（レースID, 指数値, 着順）
- **種類**: 35種類以上（gokei, jikyu, st, senko等）
- **活用**: 外部指数としてTARGET/WebViewerに取り込み可能

#### コース解説（CS_DATA）
- **形式**: テキスト＋GIF
- **内容**: コース特性、ラップ目安、枠順傾向
- **活用**: WebViewerのコース情報画面に統合可能

### 5.3 今後の拡張候補

1. **WCパーサー実装** - HC同様にWC用パーサーを作成
2. **コースコード調査** - 美浦D右、栗東各コースのコード解明
3. **指数データ統合** - TARGET指数をWebViewerで可視化
4. **コース解説連携** - CS_DATAをWebViewerに取り込み

### 5.4 データ戦略確定

| データソース | 用途 | 優先度 |
|------------|------|-------|
| **TARGET（JRA-VAN）** | 過去成績、調教、血統、馬体重、オッズ推移 | ⭐⭐⭐ |
| **競馬ブックスクレイピング** | 本紙印、パドック、予想コメント、厩舎情報 | ⭐⭐⭐ |

→ **両方のデータを組み合わせて最大活用**

