# 競馬AIでポルシェを買う話 1〜5週目（実運用レポート）

- **出典**: Matsukaze.AI「競馬AIでポルシェを買う話」
  - 1週目: http://matsukaze.ai/?p=605 (2018-09-18)
  - 2週目: http://matsukaze.ai/?p=618 (2018-10-15)
  - 3週目: http://matsukaze.ai/?p=628 (2018-10-06)
  - 4週目: http://matsukaze.ai/?p=634 (2018-10-17)
  - 5週目: http://matsukaze.ai/?p=644 (2018-10-17)
- **日付**: 2025-02-11

## 収支サマリー

| 週 | バンクロール | 週次回収率 | 累計複利回収率 | 的中数 | 備考 |
|---|---|---|---|---|---|
| 開始 | 500,000円 | - | - | - | ver.3デビュー |
| 1週目 | 552,470円 | 112% | 110% | 12 | 自動購入に不具合 |
| 2週目 | 781,370円 | 164% | 156% | 16 | 好調、税金問題浮上 |
| 3週目 | 559,370円 | 25% | 112% | 2(+取り逃がし) | 購入失敗で大損 |
| 4週目 | 346,260円 | 39% | 69% | 5 | ドローダウン継続 |
| 5週目 | 469,520円 | 113% | 96% | **52** | チューニングで大復活 |

## 要点

### 運用システムの実態

- **松風 ver.3**: 開発に丸2年を費やしたAI
- **自動投票**: 締切直前に自動購入するスクリプト
- **馬券種**: ワイド中心、複勝・枠連・馬連・単勝も使用
- **バンクロール管理**: 残高に連動して購入金額を上下（追い下げ方式）
- **購入規模**: バンクロールを1週間で1〜3回転させる

### 1-2週目: 順調なスタート

- 72レース/週でバンクロールが1周、回収率110%前後 = 想定通り
- シミュレーション上のパフォーマンス135%、保守的見積もり115%
- **複利回収率の定義**: 現在バンクロール / 初期バンクロール
  - 単利回収率（払戻/購入）だけではガバガバ → 複利回収率で評価すべき

### 3-4週目: ドローダウンと購入失敗

- **自動購入の障害が最大の敵**: 当たりレースの取り逃がしで15万円以上の損失
- 原因: ネット回線の遅さ、pat（投票サイト）のサーバー応答速度
- 「当たりは買えず、外れは買えている」状態 → 偶然だが心理的ダメージ大
- **教訓**: 予測精度以前に、システムの安定稼働が収益の前提条件

### 5週目: 最重要の戦略転換 ★★★

#### 「回収率を下げた」

> 回収率は高ければ良いってもんじゃない。回収率を最大化することと、収支を最大化することは同義ではなくて、むしろ回収率は最低限100を超えた上で、低い方がずっと安定するし、プラス額は大きくなる。

#### 「期待値 > 1.0 の馬券を全て買う」

> 収支を最大化する為の戦略は、期待値が1.0よりも大きい馬券を全て買うこと。期待値が1.01の馬券は3.0の馬券よりもずっと多いはずなので、その全てを買った時の期待値の平均は多分1ちょいになるはず。

#### 「回収率200%の人は損をしている」

> 回収率200%を誇ってる人は、購入している馬券の期待値の平均が2ということなので、期待値が1.01~1.99の馬券の殆どを看過してしまっていることを暗示する。勿体無い。

#### 結果

- 購入点数増加 → 的中数が5個→**52個**に激増
- バンクロール34万円で97万円分購入（3回転）
- 回収率は113%と控えめだが、収支は+13.4万円で実利大

### 税金問題

- 馬券の払戻金の課税: 一時所得 vs 雑所得
- 一時所得だと購入金額全体を経費にできず、致命的
- 雑所得として申告するために、システマティックな購入の証拠が必要
- 買い目を事前にTwitterで公開 = 納税時の証拠作り

## AI開発への示唆

### 1. 回収率最大化 ≠ 収支最大化（最重要知見）

これは本ナレッジベース全体で最も実用的な知見の一つ。

```
【回収率最大化戦略】
  - 高確信度の馬券のみ購入
  - 購入点数少、購入金額少
  - 回収率は高い（例: 200%）が、利益額は小さい
  - 分散が大きく不安定

【収支最大化戦略】★Matsukaze氏の選択
  - EV > 1.0 の馬券を全て購入
  - 購入点数多、購入金額多
  - 回収率は低い（例: 110%）だが、利益額は大きい
  - 大数の法則で安定
```

数理的に:
- 利益 = 購入金額 × (回収率 - 1)
- 回収率200% × 購入10万 = 利益10万
- 回収率110% × 購入100万 = 利益10万（同じ利益だがこちらの方が安定）

### 2. バンクロール回転率という概念

- 週にバンクロールを何回転させるか = 利益の倍率
- 1回転: 110% → 10%増
- 3回転: 110%^3 → 33%増（複利効果）
- **回転率を上げるにはEV > 1.0の馬券を増やす = 購入点数を増やす**

### 3. 自動購入システムの重要性

- 予測精度100%でも購入できなければ利益はゼロ
- **自動購入の信頼性はモデル精度と同等以上に重要**
- リトライ処理: 「失敗したらもう1回」で成功率が劇的に改善
- 直前購入のタイミング制御、ネットワーク安定性の確保

### 4. ドローダウン耐性の設計

| 週 | バンクロール | 初期比 |
|---|---|---|
| 2週目 | 781,370円 | 156% ← ピーク |
| 4週目 | 346,260円 | 69% ← ボトム |
| ドローダウン | -435,110円 | **-56%** |

- ピークから56%のドローダウン → これは002で予見されていた
- 「丸一日当たりがないとバンクロールが半減する」
- **バンクロール連動の追い下げ方式**で破産を防止

### 5. 複利回収率で評価する

- 単利回収率（払戻/購入）は購入金額に依存するため比較しにくい
- **複利回収率 = 現在バンクロール / 初期バンクロール** が真の評価指標
- これは投資の「累計リターン」に相当

## 独自考察

### 001-005の理論が実践で検証された

| 理論（記事） | 実践での検証（006） |
|---|---|
| 確率の収束は遅い (005) | 3-4週目のドローダウン |
| 流れはない、平均回帰 (005) | 大負けの後にチューニングで復活 |
| 期待値ベースの大量購入 (002) | 5週目の戦略転換で実証 |
| オッズの歪みを突く (001) | ワイド中心の低オッズ馬券で安定 |
| アルゴリズムは何でもいい (004) | 問題はモデルより運用システム |

### 馬券種ポートフォリオの構成

5週分の的中馬券を分析すると:

| 馬券種 | 出現頻度 | 特徴 |
|---|---|---|
| **ワイド** | 最多（約70%） | 的中率が高く分散が小さい、主力 |
| 枠連 | 中程度 | ワイドと近い性質 |
| 複勝 | 少数 | 最も安定、確実な利益確保 |
| 単勝 | 少数 | EV高の場合のみ |
| 馬連 | 稀 | EV高の場合のみ |

→ **低分散馬券（ワイド・複勝・枠連）中心のポートフォリオ** = 大数の法則で安定

### 5週目のチューニングの本質

「購入点数を増やした」= 以下のいずれかと推測:
1. EV閾値を下げた（例: 1.2以上 → 1.01以上に緩和）
2. 馬券種を追加（ワイドの組合せを増やした）
3. レース選別を緩和（より多くのレースに参加）

これは002「設定6のジャグラーを2000回転」の直接的な実装。

## 関連データ

| データ項目 | 用途 | 備考 |
|---|---|---|
| 自動投票API | pat/即PAT経由の自動購入 | 安定性が最重要 |
| 全馬券種オッズ | EV > 1.0の馬券全探索 | ワイド・枠連・複勝・単勝・馬連 |
| バンクロール履歴 | ドローダウン分析、破産確率計算 | リスク管理 |

## アクションアイテム

- [ ] EV閾値パラメータの設計（1.0〜いくつで購入するか）
- [ ] 馬券種ポートフォリオ戦略の設計（ワイド中心 + 補助的に単勝/複勝/枠連）
- [ ] バンクロール管理ロジック（追い下げ方式）の実装設計
- [ ] 自動購入システムのリトライ・耐障害設計
- [ ] 複利回収率ベースの評価ダッシュボード設計
- [ ] ドローダウン耐性のシミュレーション（モンテカルロ法）

## タグ

`#馬券戦略` `#オッズ` `#モデル` `#運用` `#バンクロール`
