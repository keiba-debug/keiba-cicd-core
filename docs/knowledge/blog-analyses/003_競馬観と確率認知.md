# 競馬とギャンブルの話① 競馬観と確率認知

- **出典**: Matsukaze.AI「競馬とギャンブルの話① 競馬観と確率認知」 http://matsukaze.ai/?p=517
- **日付**: 2025-02-11（元記事: 2018-05-07）

## 要点

### 人間は確率を正しく認識できない

- 認知心理学的に、人間は確率とランダムネスを本質的に理解できていない
- 進化の過程で確率の理解が生存に有利に働かなかったため
- 確率論の発展自体が16世紀以降と不自然に浅い（幾何学は古代から）
- **人は確率事象に超自然的な法則を見出そうとする**（運命、験担ぎ、流れ、陰謀論）
- 人は理解が簡単な「1対1の因果関係」を求めがち
- **モンティ・ホール問題**: 数学者すら間違える確率直感の歪みの例

### 競馬は確率事象である（確率論的競馬観）

- 馬の着順は**確率変数**であり、同じレースを2回やれば異なる結果が出る
- 一方、多くの馬券師は**決定論的**な競馬観を持っている
  - 「予想が当たる/当たらない」という表現がその証左
- Matsukaze氏の立場: 「馬券は当たるが、予想は当たるとか当たらないとかではない」

### 最善手の評価 ≠ 結果の評価

- パチスロで設定6確定の台 → 最善手は「可能な限り金をブチ込む」こと
- **設定6で10万負けても勝利宣言する / 低設定で10万勝っても猛省する**
- 目的は「最善手を取ること」、収支は「その副産物」
- 競馬は最善手の判断が曖昧 → 「勝てば官軍」になりがち → これが問題
- **意思決定のクオリティで自分のギャンブルを評価すべき**

### 「長期的」とはどれくらいか？

- 「長期的に回収率プラスなら手法は正しい」は合意できるが…
- 「長期的」の定義が曖昧で恣意的に決定されがち
- この問題についても自分なりの解は出ている（別記事で言及予定）

## AI開発への示唆

### 1. モデル評価の指標設計（最重要）

- **的中率で評価してはいけない**
- AI予測の評価は「意思決定のクオリティ」= 期待値で行うべき
- 具体的な評価指標:
  - **期待値（EV）**: 予測確率 × オッズ の平均
  - **ブライアスコア**: 確率予測の較正精度
  - **対数損失**: 予測確率分布の質
  - **長期回収率**: 十分な試行回数での実回収率
- 「当たったか外れたか」ではなく「確率推定が正確だったか」を問う

### 2. 確率的予測モデルの構築

- 着順を**点予測**するのではなく、**確率分布**として出力すべき
  - 各馬の勝率、連対率、複勝率を確率として出力
  - 「3着以内に入る確率40%」のような表現
- 決定論的なアプローチ（「この馬が勝つ」）からの脱却

### 3. バックテストの統計的妥当性

- 「長期的とはどれくらいか？」への答えが必要
- 統計的有意性の検定:
  - 回収率が100%を超えることの統計的有意性
  - サンプルサイズ（レース数）と信頼区間の関係
  - ブートストラップ法による信頼区間の推定
- **少なくとも数百〜数千レースの検証が必要**（002のジャグラー比喩と整合）

### 4. 認知バイアス対策としてのAI

- 人間の確率認知の歪みこそ、AIが人間に勝てる根拠
- 人間の馬券購入者が系統的に犯すバイアス:
  - **お気に入りロングショットバイアス**: 大穴馬を過大評価（夢を買う）
  - **確証バイアス**: 自分の予想を裏付ける情報だけ集める
  - **代表性ヒューリスティック**: 少数の結果からパターンを見出す
  - **後知恵バイアス**: 結果を見て「やっぱり」と思う
- AIはこれらのバイアスから自由 → オッズの歪み = 人間のバイアスの集積

## 独自考察

### 001→002→003の思想的フレームワークの形成

3記事を通して、Matsukaze氏の競馬AI戦略の全体像が見えてくる:

```
[003] 確率論的競馬観（基礎思想）
  ↓
着順は確率変数 → 確率予測が本質
  ↓
[001] オッズの歪み検出（着眼点）
  ↓
人間のバイアスがオッズを歪める → そこに期待値がある
  ↓
[002] 期待値ベースの大量購入（戦略）
  ↓
正の期待値の賭けを大量に繰り返す → 大数の法則で収束
```

### 「決定論 vs 確率論」のAI実装上の意味

| 観点 | 決定論的AI | 確率論的AI |
|---|---|---|
| 出力 | 着順予測（1着: 馬A, 2着: 馬B...） | 各馬の確率分布 |
| 評価 | 的中率 | ブライアスコア、対数損失 |
| 馬券 | 本命馬券中心 | 期待値ベースで選択 |
| 弱点 | 外れた時に学びが少ない | 較正が不正確だと全体が崩れる |
| 強み | 直感的に理解しやすい | 資金配分の最適化が可能 |

Matsukaze氏は明確に**確率論的AI**の立場を取っている。これは我々の開発方針にも採用すべき。

### パチスロとの類似性から学ぶ運用哲学

- パチスロ「設定6」= 数学的に正の期待値が確定している台
- 競馬AI = 「予測確率 × オッズ > 1」のレースを見つける装置
- 共通点: **最善手を取り続ければ、長期的に収支はプラスに収束する**
- 違い: パチスロは期待値が既知、競馬は予測精度に依存
- **だからこそ、予測精度の「較正（キャリブレーション）」が最重要**
  - 「勝率30%と予測した馬が、実際に30%前後で勝つ」ことの保証

### 意思決定フレームワークの実装提案

```
IF AI予測期待値 > 閾値:
    → 購入（ベットサイズはケリー基準で決定）
ELSE:
    → 見送り

評価:
    × 「今日は3レース的中した！」
    ○ 「今月の購入レースの平均期待値は1.15だった」
    ○ 「予測確率の較正精度はブライアスコア0.18だった」
```

## 関連データ

| データ項目 | 用途 | 備考 |
|---|---|---|
| 全レース確定オッズ | 期待値計算 | 控除率(約20-30%)を加味 |
| 人気別成績統計 | バイアスの検出 | 人気別の回収率傾向 |
| 過去予測結果 | 較正精度の検証 | 予測確率 vs 実績の比較 |

## アクションアイテム

- [ ] モデル評価指標をブライアスコア/対数損失ベースに設計
- [ ] 確率分布出力型のモデルアーキテクチャを検討
- [ ] バックテストの統計的有意性検定フレームワークを構築
- [ ] 人気別回収率のバイアス分析（お気に入りロングショットバイアス等）
- [ ] 較正（キャリブレーション）プロットの自動生成機能

## タグ

`#モデル` `#馬券戦略` `#オッズ` `#特徴量` `#確率論`
