# ランダムネスの認知錯誤: 逆正弦法則・ギャンブラーの誤謬・ホットハンド・モンテカルロの誤謬

4つの概念は「親戚筋」というより、同じ根から生えた枝。すべて「人間がランダムな系列の性質を直感的に理解できない」ことから生じる。競馬AI運用では、これらの誤りが判断ミスの直接的な原因になる。

> 起点: 「逆正弦法則、ギャンブラーの誤謬、ホットハンド誤謬、モンテカルロの誤謬は親戚筋といえるかどうか？」

---

## 1. 家系図: 4つの概念の関係

```
                    ┌──────────────────────────┐
                    │  人間はランダムを理解できない  │
                    │  （認知バイアスの根源）       │
                    └──────────┬───────────────┘
                               │
              ┌────────────────┼────────────────┐
              │                │                │
     ┌────────┴────────┐  ┌───┴────┐   ┌───────┴───────┐
     │ 偏りの過小評価   │  │均衡への│   │ 系列の誤認識   │
     │ 「こんなに偏る   │  │過信    │   │ 「パターンが   │
     │  はずがない」    │  │        │   │  あるはず」    │
     └───┬─────────┬──┘  └───┬────┘   └───┬───────┬──┘
         │         │          │           │       │
    ギャンブラー  モンテカルロ  逆正弦法則  ホットハンド 平均回帰
    の誤謬       の誤謬       （数学的事実） 誤謬      の誤解
    (= 同一)
```

### 血縁関係の整理

```
■ ギャンブラーの誤謬 ≡ モンテカルロの誤謬
  → 完全に同じもの。名前が違うだけ。
  → モンテカルロの名は1913年の事件に由来。

■ ギャンブラーの誤謬 ↔ ホットハンド誤謬
  → 方向が逆の双子。
  → ギャンブラー: 「連続の後は逆が来るはず」
  → ホットハンド: 「連続の後はさらに続くはず」
  → どちらも「過去の結果が未来に影響する」と信じる点で同根。

■ 逆正弦法則 → ギャンブラーの誤謬を「説明」する
  → 逆正弦法則は数学的事実。誤謬ではない。
  → 「偏りは思ったより長く続く」ことを証明している。
  → だからギャンブラーの「そろそろ戻るはず」は間違い。

■ 平均回帰 → 全ての誤謬の背景にある
  → 平均回帰は事実だが、「いつ」回帰するかは予測できない。
  → 「次に回帰する」と思うのがギャンブラーの誤謬。
  → 「まだ回帰しない」と思うのがホットハンド誤謬。
```

---

## 2. 各概念の定義と具体例

### 2-1. ギャンブラーの誤謬（= モンテカルロの誤謬）

```
定義:
  独立な試行の系列で、ある結果が続いた後に
  逆の結果が出やすくなると信じる誤り。

核心:
  コインを10回投げて全部表 → 「次は裏が出やすいはず」
  → 間違い。11回目の表の確率は依然として50%。

1913年モンテカルロ事件:
  ルーレットで黒が26回連続出た。
  途中からプレイヤーたちは「次は赤だ」と大金を赤に賭けた。
  カジノは莫大な利益を得た。
  → 各回のルーレットは独立。26回黒が続いても、次の黒の確率は変わらない。

競馬での例:
  「5連敗したから、そろそろ当たるはず」→ 間違い
  「先週3連勝したから、今週は負けるかも」→ 間違い
  的中率10%のモデルが10連敗する確率は34.9%。珍しくもない。
```

### 2-2. ホットハンド誤謬

```
定義:
  ある結果が続いた後に、同じ結果がさらに続きやすくなると信じる誤り。

核心:
  バスケ選手が3本連続でシュートを決めた → 「彼はホットハンドだ！次も入る！」
  → 多くの研究で、前のシュートの成否は次の成否に影響しないことが示されている。
  （ただし近年「弱いホットハンド効果は存在する」との研究もあり、完全に決着していない）

競馬での例:
  「ルメールが午前中に2勝 → 午後も好調」（005で言及）→ 根拠なし
  「このAIモデルは先週3連勝 → 今週も調子がいい」→ 根拠なし
  「このモデルは最近よく当たる → パラメータを攻めよう」→ 危険！
```

### 2-3. 逆正弦法則

```
定義（数学的事実）:
  公平なコイン投げを繰り返したとき、累計で「表が勝っている」時間の割合は
  一様分布（どの割合も同じ確率）ではなく、逆正弦分布に従う。

直感に反する結論:
  1,000回コインを投げたとき:
  - 「500回付近で表と裏が拮抗する」と多くの人は思う
  - 実際には「1,000回中990回以上、表が勝ち越している」確率と
    「1,000回中990回以上、裏が勝ち越している」確率が、
    「500回付近で拮抗する」確率よりはるかに高い

  つまり:
  - ランダムな系列では、一方が圧倒的に長い間リードし続けるのが普通
  - 頻繁にリードが入れ替わるのはむしろ珍しい
  - 「そろそろ均衡に戻るはず」という直感は完全に間違い
```

```
逆正弦分布のイメージ:

  「1000回のうち表がリードしている回数」の確率分布:

  確率
   |██                                          ██
   |████                                      ████
   |██████                                  ██████
   |████████                              ████████
   |██████████                          ██████████
   |████████████                      ████████████
   |████████████████            ████████████████
   |██████████████████████████████████████████████
   └──────────────────────────────────────────────
    0    100   200   300   400   500   600   ...  1000
                  表がリードしている回数

  → U字型の分布。「ほぼずっと表がリード」or「ほぼずっと裏がリード」が最頻値
  → 「半々で交互にリード」（500回付近）は最も起きにくい
```

### 2-4. これらが「同じ家系」である理由

```
共通の根:
  人間は「ランダムな系列は頻繁に平均に戻る」と信じている。
  しかし実際のランダムは:
  - 偏りが長く続く（逆正弦法則）
  - 次の試行は前の結果に影響されない（独立性）
  - 平均への回帰は「いつか起きる」が「いつ起きるか」は予測不能

ギャンブラーの誤謬:
  「偏りが長い → そろそろ戻る」
  → 逆正弦法則が「偏りは思ったより長い」と言っている
  → 「そろそろ」の時点で間違い

ホットハンド誤謬:
  「偏りが続いている → まだ続く」
  → 独立性が「次は前に影響されない」と言っている
  → 「まだ続く」の根拠がない

逆正弦法則:
  → 上記2つの誤りがなぜ生じるかの数学的説明
  → 人間の「均衡への期待」が間違いであることの証明
  → 誤謬ではなく事実。人間の直感を裏切る事実。
```

---

## 3. 競馬AI運用への具体的影響

### 3-1. 連敗時の判断ミス

```
シナリオ: AIモデルが10連敗した

■ ギャンブラーの誤謬に陥ると:
  「10連敗したから、そろそろ当たるはず」
  → パラメータを変えない、あるいは購入額を増やす
  → 根拠のない楽観

■ ホットハンド誤謬（逆方向）に陥ると:
  「負けが続いている。モデルが壊れた」
  → パラメータを急いで変更する、運用を止める
  → 根拠のない悲観

■ 逆正弦法則を理解していると:
  「10連敗は的中率10%なら34.9%の確率で起きる。普通のこと」
  「的中率自体が変わっていないなら、パラメータを変える理由はない」
  「ただし的中率の変化は監視すべき（H-15: 独立性の検証）」

★松風の-97%ドローダウン（009）:
  「的中率は変わっていないのに回収率が20%落ちた」
  → 的中率が同じ = モデルは壊れていない
  → 回収率が落ちた = チューニング（EV閾値）の問題
  → 松風は正しく「モデルではなくチューニングが原因」と判断した
  → これは逆正弦法則の理解があってこそ
```

### 3-2. 松風の「ドヤ天」（009）

```
松風が言及した「ドヤ天」:
  資産がピークに達した後、SNSでドヤると天井を打つ

逆正弦法則の説明:
  → バンクロールのピークは「偏りの極大点」
  → 逆正弦法則により、ピーク後に長い下降期間が来るのは普通
  → 「ドヤったから天井」ではなく「ピークは系列の端に偏りやすい」
  → つまりSNSに投稿したかどうかは関係ない。平均回帰しただけ。

実用的な教訓:
  → バンクロールが最高値を更新した直後に「攻める」のは危険
  → ピーク後のドローダウンは統計的に「普通」
  → 追い下げ方式が自動的にリスクを調整してくれる
```

### 3-3. パラメータ変更のタイミング

```
最も危険な判断ミス:
  「結果が悪い → パラメータを変更する」

これがなぜ危険か:

  短期的な結果のブレ（ランダムな偏り）と、
  本当にモデルが劣化した（構造的変化）の区別がつかない。

  ギャンブラーの誤謬: 「悪い結果の後は良くなるから、変更不要」
  ホットハンド逆: 「悪い結果が続くから、すぐ変更すべき」
  どちらも「結果の系列」から「次の結果」を予測しようとしている = 誤り

正しいアプローチ:
  1. 的中率と回収率を分離して監視（009の教訓）
  2. 的中率が変わらない → モデルは正常。パラメータの問題
  3. 的中率が有意に低下 → モデルの劣化の可能性。検証が必要
  4. 「有意に」の判定は統計的検定で行う（直感ではなく）
  5. 変更する場合はバックテスト済みの値に限定（007の教訓）
```

---

## 4. 逆正弦法則の衝撃: 思ったよりずっと偏る

### 具体的な数値

```
年間3,200レースで購入、的中率10%のモデル:

  年間的中数の期待値: 320回
  年間ハズレ数の期待値: 2,880回

  「的中の累計が期待値を上回っている期間」は逆正弦分布に従う。

  つまり:
  - 年間の80%以上の期間で「期待値を下回り続ける」確率: 約35%
  - 年間の80%以上の期間で「期待値を上回り続ける」確率: 約35%
  - 年間を通じて期待値付近を推移する確率: 約30%

  ★年の3分の1の確率で「ほぼ1年中、期待値を下回り続ける」
  → これは異常ではない。逆正弦法則の当然の帰結。
  → しかし人間はこれを「モデルが壊れた」と感じる。
```

### バンクロール推移への影響

```
追い下げ方式のバンクロール推移:

  期待回収率115%、週次で購入するモデル。
  1年（52週）のシミュレーション。

  人間が期待する推移:
    ┌──────────────────────────────┐
    │        ／                   │ ← 右肩上がり
    │      ／                     │
    │    ／                       │
    │  ／                         │
    │／                           │
    └──────────────────────────────┘

  実際に起きうる推移（逆正弦法則に従う）:
    ┌──────────────────────────────┐
    │                      ／     │ ← 後半にまとめて利益
    │                    ／       │
    │                  ／         │
    │＿＿＿＿＿＿＿＿／           │ ← 前半は横ばい or 下落
    │              ＼             │
    └──────────────────────────────┘

  あるいは:
    ┌──────────────────────────────┐
    │  ／＼                       │ ← 前半に利益、後半は横ばい
    │／    ＼＿＿＿               │
    │          ＼＿＿＿           │
    │               ＼＿＿       │
    │                    ＼＿＿  │
    └──────────────────────────────┘

  どちらも「年間回収率115%」と矛盾しない。
  利益の出るタイミングは予測不可能であり、
  前半に集中することも後半に集中することもある。
  均等に分散するとは限らない。
```

---

## 5. 「この4つは親戚か」への結論

### 家系図の完全版

```
┌─────────────────────────────────────────────────────────┐
│              ランダムネスの認知錯誤 家系図                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  【数学的事実】              【認知バイアス】              │
│                                                         │
│  逆正弦法則 ─────証明────→ 人間の均衡期待は間違い        │
│  「偏りは長く続く」           │                           │
│                              ├→ ギャンブラーの誤謬       │
│  大数の法則 ─────証明────→  │  「そろそろ戻るはず」      │
│  「いつかは収束する」         │  = モンテカルロの誤謬      │
│  ただし「いつか」は遠い      │                           │
│                              ├→ ホットハンド誤謬         │
│  平均回帰 ───────事実────→  │  「まだ続くはず」          │
│  「極端な後は平均に近づく」   │                           │
│  ただし「次に」ではない      ├→ 飛行教官の誤謬          │
│                              │  「叱ると上達する」        │
│  独立性 ─────────前提────→  │                           │
│  「過去は未来に影響しない」   └→ 結果論バイアス          │
│  （ただし前提が崩れる       　  「あの判断は間違いだった」 │
│   場合もある = H-15）                                    │
│                                                         │
│  【関係性】                                              │
│  ギャンブラーの誤謬 ←── 双子 ──→ ホットハンド誤謬       │
│  「続いたら逆が来る」           「続いたらまた来る」      │
│       ↑                              ↑                  │
│       └─── どちらも独立性を無視 ───┘                   │
│                                                         │
│  逆正弦法則 ──→ 両方の誤りを数学的に説明                 │
│  「偏りは長い」→ だから「そろそろ」も「まだ」も無意味     │
└─────────────────────────────────────────────────────────┘
```

### 「親戚」以上の関係

```
結論: 親戚どころか、同じ現象の異なる表れ方。

  逆正弦法則 = 数学的事実（偏りが長い）
  ギャンブラー/モンテカルロの誤謬 = その事実を受け入れられない反応（逆を期待）
  ホットハンド誤謬 = その事実を過剰に解釈する反応（続くと信じる）

  3つは同じコインの表と裏と縁:
  - 逆正弦法則が「現実」
  - ギャンブラーの誤謬が「楽観的な誤解」
  - ホットハンドが「別方向の誤解」

  そしてモンテカルロの誤謬は、ギャンブラーの誤謬の別名にすぎない。
```

---

## 6. 実運用のための行動指針

### 6-1. やってはいけないこと

```
× 連敗中に「そろそろ当たるはず」と思う（ギャンブラーの誤謬）
  → 購入額を増やしてはいけない。追い下げ方式に任せる。

× 連勝中に「調子がいいから攻めよう」と思う（ホットハンド誤謬）
  → EV閾値を下げたり、購入額を増やしてはいけない。

× 3週連続マイナスで「モデルが壊れた」と思う
  → 逆正弦法則により、長い不調期間は統計的に普通。
  → 的中率が変わっていないなら正常。

× ピーク後のドローダウンで「何か変わった」と思う
  → 平均回帰 + 逆正弦法則の当然の帰結。
  → 松風の「ドヤ天」はまさにこれ。

× 好調期にパラメータを「攻め」に変更する
  → 松風の最大の失敗（-97%）はまさにこれ（009）。
```

### 6-2. やるべきこと

```
○ 的中率と回収率を分離して監視する（009の教訓）
  → 的中率一定+回収率低下 = パラメータの問題
  → 的中率低下+回収率低下 = モデルの劣化の可能性

○ パラメータ変更は統計的検定に基づく
  → 「なんとなく悪い」ではなく「ブライアスコアが有意に悪化した」

○ 連敗への心理的準備をしておく
  → 的中率10%のモデルで10連敗の確率: 34.9%
  → 20連敗の確率: 12.2%
  → 30連敗の確率: 4.2%
  → 「いずれ起きること」として事前に受け入れる

○ 追い下げ方式に任せて人間は介入しない
  → Themisの「目隠し」原則 = ホットハンドもギャンブラーの誤謬も排除
  → 人間の感情がバンクロール管理に影響しない設計

○ ドローダウンの閾値を事前に設定し、閾値内なら何もしない
  → operations_architecture_principles.md: -20%警告、-30%停止勧告
  → 閾値を超えた場合のみ原因調査（ランダムか構造変化か）
```

### 6-3. 唯一の例外: 独立性が崩れた場合

```
上記のすべては「試行間が独立である」という前提に立っている。
独立性が崩れる場合（H-15）:
  - 季節的な変動（冬場の芝は馬場が荒れやすい → 的中率変化）
  - 市場環境の変化（競合AIの増加 → 歪みの縮小）
  - モデルの陳腐化（特徴量の重要度が経年変化）

この場合は「ギャンブラーの誤謬」ではなく「本当に変わった」可能性。
→ 統計的検定で独立性を継続的に監視する必要がある。
→ H-15（試行間の独立性）の検証が重要な理由はここにある。
```

---

## 7. 005・009との統合

```
005（ランダムネスと平均回帰）:
  → ギャンブラーの誤謬とホットハンド誤謬の概念を導入
  → 「流れとか調子とかない。あるのは平均回帰の法則だけ」
  → 「血統×距離×コースの少数条件分析は血液型占い」

009（ドローダウンと独立性）:
  → 松風が逆正弦法則的な長期偏りを実体験（160万→5.5万）
  → 「ドヤ天」= 平均回帰の認識
  → 独立性仮定の問題提起

本考察で追加したこと:
  → 4つの概念の関係性の明確化（家系図）
  → 逆正弦法則の具体的な数値（80%の期間で下回り続ける確率35%）
  → 運用上の行動指針への落とし込み
  → H-15（独立性）が全ての前提であることの再確認
```

---

## アクションアイテム

- [ ] 連敗確率の早見表を作成（的中率5-20%、連敗5-30回のマトリクス）
- [ ] バンクロール推移のモンテカルロシミュレーションで逆正弦法則を可視化
- [ ] パラメータ変更の判断基準（統計的検定のフレームワーク）を設計
- [ ] ドローダウン監視ダッシュボードに「この下落は統計的に異常か」の表示を追加
- [ ] 005, 009の教訓をこの考察と統合したチェックリストを作成

## タグ

`#確率論` `#独立性` `#バンクロール` `#チューニング` `#過学習`
