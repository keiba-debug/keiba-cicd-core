# 回収率と購入量のトレードオフ: なぜ「あえて回収率を下げる」のか

回収率150%の買い目と110%の買い目では出現頻度がまったく違う。高い回収率を追求すると購入量が減り、結果として利益が下がる。「最終的には115%くらいを狙うことになるのか？」という問いを数理的に考察する。

> 起点: 「150%の買い目と110%の買い目だと出現率が異なる。リターンを得るためにあえて回収率を下げるという戦略が必要。最終的には115%ぐらいを狙うことになるのか？」

---

## 1. 利益の公式: 回収率は「率」、利益は「額」

```
利益 = 購入金額 × (回収率 - 1)
```

この単純な式に全てが凝縮されている。

```
戦略A: 回収率150%、年間購入100万円
  利益 = 100万 × (1.50 - 1) = 50万円

戦略B: 回収率115%、年間購入5,000万円
  利益 = 5,000万 × (1.15 - 1) = 750万円

戦略C: 回収率110%、年間購入1.24億円
  利益 = 1.24億 × (1.10 - 1) = 1,240万円 ← 松風2019年に近い
```

回収率が高い方が「上手い」ように見えるが、利益は購入金額との掛け算。回収率を下げてでも購入金額を増やした方が利益は大きい。

---

## 2. なぜ「回収率が高い買い目」は数が少ないのか

### EV（期待値）の分布

```
ある時点での全馬券のEV分布を考える:

  EV < 0.80:  大半の馬券（控除率+市場が概ね正しい）
  EV 0.80-1.00: AIが「やや割安」と判断する馬券
  EV 1.00-1.10: AIが「わずかにプラス」と判断する馬券 ← 数が多い
  EV 1.10-1.20: AIが「プラス」と判断する馬券 ← そこそこある
  EV 1.20-1.50: AIが「かなりプラス」と判断する馬券 ← 少ない
  EV 1.50-2.00: AIが「大幅にプラス」と判断する馬券 ← 非常に少ない
  EV > 2.00:    AIが「信じがたいほどプラス」と判断 ← ほぼない

  ★市場が効率的であるほど、EVが1.0から離れた馬券は減る
  ★つまり「おいしい馬券」ほど希少
```

### 直感的な理由

```
なぜEV 1.5 の馬券はEV 1.1 の馬券より少ないか:

  EV = AI予測確率 × オッズ

  EV 1.5 が成立する条件:
    → AIの確率が市場の確率より50%以上高い
    → 例: AIが30%と予測、市場が20%と評価（オッズ5倍）
    → 「市場が50%も間違えている」状況 → 稀

  EV 1.1 が成立する条件:
    → AIの確率が市場の確率より10%程度高い
    → 例: AIが22%と予測、市場が20%と評価（オッズ5倍）
    → 「市場が10%間違えている」状況 → よくある

  市場の誤差はおおむね正規分布的に分布する。
  大きな誤差（= 高EV）ほど出現頻度が低い。
```

---

## 3. EV閾値と利益の関係: 数学的に整理する

### モデル化

```
仮定:
  - AIが推定するEVの分布が既知
  - EV閾値θ以上の馬券を全て購入する
  - 購入額はケリー基準（バンクロール比例）

EV閾値θを変化させたときの各変数:

  θ↑（閾値を上げる = 厳選する）:
    → 購入点数 ↓↓
    → 平均回収率 ↑↑
    → 購入金額 ↓↓（バンクロール回転率が下がる）
    → 利益 = 金額 × (率-1) → ???（率↑と金額↓の綱引き）
    → 分散 ↑↑（試行回数が少ない = 結果のブレが大きい）

  θ↓（閾値を下げる = 広く買う）:
    → 購入点数 ↑↑
    → 平均回収率 ↓↓
    → 購入金額 ↑↑（回転率が上がる）
    → 利益 = 金額 × (率-1) → ???
    → 分散 ↓↓（試行回数が多い = 大数の法則で安定）
```

### 利益関数の形

```
利益(θ) = 購入金額(θ) × (回収率(θ) - 1)

この関数のグラフは「山型」になる（はず）:

利益
  |
  |         ★最適点
  |       ／ ＼
  |     ／     ＼
  |   ／         ＼
  | ／             ＼
  |──────────────────── EV閾値θ
  1.0  1.1  1.2  1.5  2.0

  θ = 1.0:  EV > 1.0を全て購入。
             購入金額は最大だが、回収率は最低（≈ 100%+α）
             利益 ≈ 最大購入額 × α（αが小さいので微妙）

  θ = 1.1:  そこそこ購入、回収率もそこそこ
             利益はかなり大きい

  θ = 1.5:  購入がかなり少ない、回収率は高い
             利益は小さい（金額が足りない）

  θ = 2.0:  ほぼ買えない、回収率は最高
             利益は微小

★最適点はθ = 1.0〜1.2のどこかにある（モデルの精度に依存）
```

---

## 4. 松風の実績から「115%」の意味を逆算する

### 松風の回収率推移

```
2018年後半（ポルシェ企画）:
  初期: 回収率を攻めたチューニング → 160万→5.5万（-97%）
  修正後: 「回収率を下げた」→ 復活

2019年:
  年間回収率: 114%
  年間購入額: 1.24億円
  年間利益: +1,739万円

2020年:
  年間回収率: 117.5%
  年間購入額: 25億円
  年間利益: +4.34億円

推移: 114% → 117.5%
  → 2020年はモデル改善+三連単導入で回収率がやや上昇
  → ただし大枠は110-120%の範囲
```

### 「115%」は狙った結果か、結果としてそうなったのか

```
おそらく後者。つまり:

  1. EV > 1.0（または1.0に近い閾値）の馬券を全て購入する
  2. AI予測の精度に応じて、結果的に回収率が決まる
  3. その結果が110-120%の範囲に落ち着いた

  「115%を目標にチューニングする」のではなく、
  「EV閾値を適切に設定した結果、回収率が115%前後になる」

なぜ110-120%に落ち着くか:
  - AIが検出できる市場の非効率性は限られている
  - 控除率20-27.5%を超えるEVを持つ馬券は多くない
  - EV > 1.0の馬券の平均EVは1.1〜1.2程度（大半がEV 1.01-1.20）
  - → 全購入した結果の平均回収率 ≈ 110-120%
```

---

## 5. 「目標回収率」という考え方の問題

### 回収率は「結果」であって「目標」ではない

```
× 「回収率115%を目標にしよう」
○ 「EV > θの馬券を全て購入し、θを最適化しよう」

なぜか:
  回収率を「目標」にすると、手段が歪む。
  「回収率を上げたい」→ 確信の低い馬券を切る → 購入量が減る → 利益が減る

  正しいアプローチ:
  「利益を最大化したい」→ EV閾値を最適化する → 結果として回収率が決まる
```

### 最適化すべきは利益関数

```
目的関数: 利益(θ) = Σ_i [bet_i(θ) × (EV_i - 1)]

  bet_i: 馬券iへの購入金額（ケリー基準で決定）
  EV_i: 馬券iの期待値
  θ: 「EV_i > θ の馬券のみ購入する」の閾値

制約条件:
  - バンクロール上限
  - 1レースあたりの購入金額上限
  - PAT口座の購入点数上限（9,000点/日）
  - 破産確率 < 許容水準（例: 1%）
  - 税務要件（年間購入レース比率 > 80%）

→ θ を変えながら利益(θ) をバックテストで計算
→ 最大となるθ* を採用
→ そのθ* での回収率が結果として115%だったとしても、
   それは「115%を狙った」のではなく「利益を最大化した結果」
```

---

## 6. 安定性の次元: 分散と大数の法則

### 回収率が高いほど不安定

```
統計的な事実: 試行回数が少ないほど、結果のブレが大きい

EV閾値 1.5（高閾値）:
  年間購入点数: 500点
  1点あたりの的中率: 10%
  年間的中数の期待値: 50回
  年間回収率の95%信頼区間: 80% - 220%
  → 「プラスになるかマイナスになるかわからない」

EV閾値 1.05（低閾値）:
  年間購入点数: 50,000点
  1点あたりの的中率: 15%
  年間的中数の期待値: 7,500回
  年間回収率の95%信頼区間: 108% - 122%
  → 「ほぼ確実にプラス」

★大数の法則:
  試行回数 → ∞ のとき、実現回収率 → 期待回収率
  試行回数が多いほど、期待値通りの結果が出やすい
```

### 松風の「-97%ドローダウン」を回避する

```
2019年前半の-97%（160万→5.5万）の原因:
  → EV閾値を攻めすぎた（007, 009）
  → 購入点数が少なくなり、分散が増大
  → 連敗が続いた時にバンクロールが急減

修正後:
  → EV閾値を下げた（= 回収率を下げた）
  → 購入点数が増え、分散が減少
  → 5.5万 → 1,739万に復活

教訓:
  「回収率を下げる」= 「安定性を買う」
  → これは保守的な選択ではなく、利益最大化のための合理的選択
```

---

## 7. 複利効果との相互作用

### 回収率 × 回転率 = 複利リターン

```
追い下げ方式（バンクロール比例）では、利益が再投資される。
このとき、回収率だけでなく「回転率」（週に何回バンクロールが回るか）も重要。

戦略A: 回収率130%、月2回転（高閾値、少量購入）
  月間複利: 1.30^2 = 1.69 → +69%/月

戦略B: 回収率110%、月8回転（低閾値、大量購入）
  月間複利: 1.10^8 = 2.14 → +114%/月

  ★戦略Bの方が回収率は低いが、複利リターンは高い！

ただし注意:
  回転率の計算は単純化しすぎている。
  実際には各回転の回収率は確率変数であり、
  「月8回転で毎回110%」は保証されない。
  回転率が高いほど「負ける回」も含まれ、
  追い下げ方式で自動的にリスク調整される。
```

### 複利における回収率の「連乗効果」

```
週ごとの回収率が独立に変動すると仮定:

  期待回収率 E[R] = 115%
  回収率の標準偏差 σ[R] = 30%（かなりブレる）

  対数リターンの期待値 ≈ ln(E[R]) - σ²/(2×E[R]²)

  → 分散が大きいと、対数リターン（=複利成長率）が下がる
  → 「回収率115%、分散大」より「回収率110%、分散小」の方が
     長期的な複利成長率は高い可能性がある

  ★これが「回収率を下げてでも安定させる」のもう一つの数理的根拠
  → 分散ドラッグ（volatility drag）と呼ばれる現象
```

---

## 8. 税引後の真の最適化

### 税金が最適閾値を変える

```
bankroll_management_principles.md で考察済みだが改めて:

  税引前EV = P × odds
  税引後EV = P × odds × (1 - tax_rate) + (1-P) × (-1)
           ≈ P × odds × 0.65  （雑所得35%の場合）

  税引前EV > 1.0 でも税引後EV < 1.0 になる馬券:
    税引前EV = 1.0〜1.54 の範囲
    → 税引前EV 1.3 の馬券: 税引後EV = 1.3×0.65 + (1-P)×... ≈ 0.85
    → 税引後はマイナス！

  ★正確な計算は複雑だが、税金を考慮すると
    EV閾値は1.0よりもかなり高くなる
    → 購入点数が減る → 回収率は上がるが利益は減る可能性

ただし実際には:
  - 雑所得の場合、外れ馬券も経費になる
  - 「税引前EV × (1 - 実効税率) + 外れ分の経費控除」で計算
  - 単純に0.65を掛けるよりは有利
  - 具体的な数値はH-20（税務要件）の検証で明らかにする

→ 税引後で最適化すると、最適閾値がθ*から θ*_tax に変わる
→ 税引後の結果的な回収率がどうなるかはシミュレーション次第
```

---

## 9. 「115%」の答え: 結果であって目標ではない

### 回収率はAIの精度が決める

```
最終的な回収率は、以下の要因の関数:

  1. AIの予測精度（キャリブレーション）
     → 精度が高いほど、EV > 1.0の馬券を正確に検出できる
     → 結果的な回収率が上がる

  2. 市場の効率性
     → 市場が非効率なほど、EV > 1.0の馬券が多く存在する
     → 結果的な回収率と購入量の両方が上がる

  3. 馬券種の選択
     → 三連単は非効率性が大きい → 回収率が高くなる傾向
     → ワイドは非効率性が小さい → 回収率は低め

  4. 競合AIの存在
     → 同じ歪みを突くAIが増えると、歪みが縮小
     → 回収率が下がる（012の論点）

松風の変遷:
  2019年: 114%（ワイド+枠連中心）
  2020年: 117.5%（三連単追加）

  → 三連単の追加で回収率が上がった
  → これはAIの精度が上がったのではなく、
     より非効率な市場（三連単）に参入した効果
```

### 我々のプロジェクトでの見通し

```
Phase 1（ワイド・馬連中心）:
  予想される回収率: 105-115%
  根拠: 松風2019年のワイド+枠連と同水準を目指す
  利益: バンクロールと回転率次第

Phase 2（三連単追加）:
  予想される回収率: 110-120%
  根拠: 三連単の非効率性を加えることで向上
  利益: 大幅に増加（購入額も増えるため）

重要: これらは「目標」ではなく「見通し」。
  実際にはAIの精度が判明した時点でバックテストして数字を確認する。
  バックテストの回収率が105%でも、購入量が十分なら利益は出る。
  回収率が105%で年間1億円購入すれば、500万円の利益。
```

---

## 10. 追加考察

### 10-1. EV閾値とパラメータの「冷却」

```
松風がチューニングの攻めすぎで-97%になった教訓:
  → EV閾値を攻め（低く）すぎると、キャリブレーションの微小な誤差が
     大量の「実はEV < 1.0」な馬券の購入につながる

  キャリブレーション誤差5%のモデルの場合:
    AIがEV = 1.05と判断した馬券の真のEV:
      → 誤差が+5%方向: 真のEV = 1.00（トントン）
      → 誤差が-5%方向: 真のEV = 1.10（プラス）
      → 平均: 真のEV ≈ 1.05 → OK

    AIがEV = 1.01と判断した馬券の真のEV:
      → 誤差が+5%方向: 真のEV = 0.96（マイナス！）
      → 誤差が-5%方向: 真のEV = 1.06（プラス）
      → 平均: 真のEV ≈ 1.01 → OKだが、半分はマイナスの馬券

  ★閾値がEVの誤差範囲ギリギリだと、
    「プラスだと思って買ったがマイナスだった」馬券が大量に混入
  → 安全マージンとしてθ = 1.0ではなくθ = 1.05〜1.10が現実的

  これが「回収率110-115%」に落ち着くもう一つの理由:
  → 閾値を1.0丁度にはできない → 結果的に多少の回収率が乗る
```

### 10-2. 「利益率」と「利益額」と「シャープレシオ」の三角関係

```
最適な戦略を決めるのに、利益率（回収率-1）だけでは不十分。
利益額だけでも不十分。リスク調整後のリターンが重要。

  シャープレシオ的指標 = 期待利益 / 利益の標準偏差

  戦略A（高閾値）:
    期待回収率: 130%、購入額: 500万、期待利益: 150万
    利益のσ: 200万（試行回数少ない）
    シャープ ≈ 150/200 = 0.75

  戦略B（中閾値）:
    期待回収率: 115%、購入額: 5,000万、期待利益: 750万
    利益のσ: 300万（試行回数そこそこ）
    シャープ ≈ 750/300 = 2.5

  戦略C（低閾値）:
    期待回収率: 105%、購入額: 1億、期待利益: 500万
    利益のσ: 200万（試行回数多い）
    シャープ ≈ 500/200 = 2.5

  → 戦略Bと戦略Cがリスク調整後で同等
  → どちらを選ぶかはバンクロールの制約次第
  → バンクロールが小さい段階ではBが現実的
```

### 10-3. バンクロール規模ごとの最適戦略

```
バンクロールの規模で最適閾値が変わる可能性:

  小規模（50万〜100万）:
    → 1回の負けのダメージが大きい
    → 安定性を重視 → 閾値をやや下げて購入点数を増やす
    → 目先の回収率より生存優先

  中規模（500万〜1,000万）:
    → 追い下げが安定して機能する規模
    → 閾値の最適化をバックテストで実施
    → 結果的に回収率110-120%程度

  大規模（5,000万〜）:
    → PAT口座の購入点数上限に当たる（9,000点/日）
    → 閾値を上げざるを得ない → 回収率が結果的に上がる
    → 松風2020年（25億購入、117.5%）がこのケース
    → 複数口座で対応（012）

  ★バンクロール規模と最適閾値の関係も検証すべき
```

### 10-4. 「結果としての回収率」を事前に推定する方法

```
バックテストで「閾値ごとの利益」を計算するフレームワーク:

Step 1: 過去データでAI予測確率を計算（Walk-Forward）
Step 2: 確率 × 確定オッズ = EV を全馬券で計算
Step 3: 閾値θを1.00, 1.01, 1.02, ..., 1.50 と変化させる
Step 4: 各θで「購入した馬券のセット」を決定
Step 5: 各セットの回収率、利益額、分散を計算
Step 6: 利益関数 or シャープレシオが最大のθを選択

出力:
  - θ vs 回収率のグラフ
  - θ vs 利益額のグラフ
  - θ vs シャープレシオのグラフ
  - 最適θ*
  - θ*での「結果としての回収率」← ★これが答え

→ H-18（最適EV閾値）の検証そのもの
→ この検証を実行すれば「何%を狙うべきか」の答えが出る
```

---

## 11. まとめ

```
Q: 最終的には115%ぐらいを狙っていくことになるのか？

A: 「狙う」のではなく「結果としてそうなる」が正確。

  1. 目標は「利益の最大化」（回収率ではない）
  2. EV閾値θを最適化する → 利益が最大になるθ*を見つける
  3. θ*で運用した結果の回収率が「結果としての回収率」
  4. 松風の実績（114-117.5%）から推測すると、
     おそらく110-120%の範囲に落ち着く
  5. ただしこれはAIの精度、馬券種、市場環境で変わる

なぜ110-120%に落ち着くか:
  - 高EV馬券は希少 → 閾値を上げると購入量が激減
  - 閾値をギリギリまで下げると誤差で損する馬券が混入
  - 安全マージンを取ると閾値1.05-1.10程度が現実的
  - 結果として平均回収率は110-120%

「115%を狙う」のではなく、
「利益を最大化するEV閾値を設定した結果、回収率が115%前後になる」
```

---

## アクションアイテム

- [ ] H-18（最適EV閾値）のバックテストフレームワーク設計
- [ ] EV分布の可視化（θ vs 購入点数、θ vs 回収率、θ vs 利益のグラフ）
- [ ] 分散ドラッグ（volatility drag）のシミュレーション
- [ ] 税引後EVでの最適閾値の再計算
- [ ] バンクロール規模別の最適閾値のシミュレーション
- [ ] キャリブレーション誤差とEV閾値の安全マージンの関係をモデル化

## タグ

`#馬券戦略` `#バンクロール` `#チューニング` `#確率論` `#オッズ`
