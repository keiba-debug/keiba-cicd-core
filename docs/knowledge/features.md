# AI特徴量候補リスト

ブログ考察から抽出した、競馬AI予測モデルに活用できる特徴量の候補を管理する。

## 凡例

- **実装難度**: 低 / 中 / 高
- **データソース**: JRA-VAN / スクレイピング / 計算値
- **出典**: 考察ドキュメント番号

## 特徴量一覧

（ブログ考察に応じて追記）

### ペース・ラップ系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| 同レース逃げ馬頭数 | 出走馬の中で逃げ脚質に分類される馬の数。多いほどハイペース→差し有利の傾向 | 中 | JRA-VAN通過順位から脚質分類 | 展開シミュレーション |
| 同レース先行馬頭数 | 先行脚質の馬の数。逃げ馬頭数と合わせてペース予測の基礎 | 中 | JRA-VAN通過順位から脚質分類 | 展開シミュレーション |
| 予想ペース指数 | 逃げ馬の持ちタイム・逃げ馬頭数・距離から推定するレースのペース予測値 | 高 | 計算値 | 展開シミュレーション |
| 当該馬の脚質 × 逃げ馬頭数 | 差し馬でハイペース予想→有利、逃げ馬でハイペース→不利等の交互作用 | 中 | 計算値 | 展開シミュレーション |
| 出遅れ率 | 過去N走での出遅れ回数/出走数。ゲートの巧拙を示す | 中 | JRA-VAN通過順位（1角順位の急落）から推定 | 展開シミュレーション |

### 脚質サブタイプ・ペース適性系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| ペース別好走率差(スロー-ハイ) | スローペースレースの好走率-ハイペースレースの好走率。正=スロー捲り型、負=ハイ追込型 | 低 | JRA-VAN成績+ペース判定から計算 | 差し馬サブタイプ |
| 平均仕掛けポイント | 過去走のポジション上昇開始コーナーの平均。2-3角=早仕掛け、4角以降=遅仕掛け | 中 | JRA-VAN通過順位から計算 | 差し馬サブタイプ |
| 上がり3F相対値(過去走平均) | 上がり3F - レース平均上がり3Fの過去走平均。瞬発型は大きな負の値 | 低 | JRA-VAN上がり3Fから計算 | 差し馬サブタイプ |
| 3-4角ポジション変動(過去走平均) | 3角順位-4角順位の過去走平均。正=コーナーで動く（捲り型）、0近辺=直線勝負 | 低 | JRA-VAN通過順位から計算 | 差し馬サブタイプ |
| 差しサブタイプ×ペース予想 | ペース別好走率差×予想RPCIの交互作用。スロー型×スロー予想=高値（好条件一致） | 中 | 計算値 | 差し馬サブタイプ |

### ポジショニング・出たなり系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| ポジショニングコスト | 枠番×脚質から期待される1角通過順位と実際の乖離。正=期待より前（無理した）、負=期待より後ろ | 中 | JRA-VAN通過順位+枠番+脚質のルックアップテーブル | ポジショニングコスト |
| 逃げ馬との枠番差 | 逃げると予想される馬の枠番と自分の枠番の差。+1〜+3=番手外（恵まれやすい） | 中 | JRA-VAN枠番+脚質推定 | ポジショニングコスト |
| ポジション安定度(前半) | 1角〜3角の通過順位の標準偏差。低い=出たなりで安定、高い=ポジション変動あり | 低 | JRA-VAN通過順位から計算 | ポジショニングコスト |
| 前半消耗度 | 4角通過順位-上がり3F順位。負=前にいたが上がりが悪い（消耗した） | 低 | JRA-VAN通過順位+上がり3Fから計算 | ポジショニングコスト |
| 逃げ馬競合指数 | 同レースの逃げ脚質馬数×自分の枠との近接度。ポジション争いの発生確率 | 中 | JRA-VAN枠番+脚質推定 | ポジショニングコスト |
| 出たなりスコア(5走平均) | 過去5走のポジショニングコスト・安定度・消耗度の統合指標。スムーズに走れるタイプかの判定 | 中 | 上記特徴量の統合計算値 | ポジショニングコスト |
| 1コーナーまでの距離 | コース×距離の組合せごとの固定値(m)。短いほど枠順バイアスが大きい | 低 | コース図から測定→ルックアップテーブル | 1コーナー距離と枠順 |
| 枠番不利度 | 枠番 / (1コーナーまでの距離/100)。外枠×距離短で値大（構造的不利） | 低 | 計算値 | 1コーナー距離と枠順 |
| ボトルネック強度 | 出走頭数 / 1コーナーまでの距離。漏斗効果の強さ。多頭数×距離短で値大 | 低 | 計算値 | 1コーナー距離と枠順 |
| 先行争い激化指数 | (先行脚質馬数 × 先行馬枠番の分散度) / 1コーナーまでの距離 | 中 | 計算値 | 1コーナー距離と枠順 |

### 馬場・コース系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| 馬場状態×馬体重 | 重馬場で重い馬が不利になる交互作用。含水率が高いほど蹄の沈み込みが増加 | 低 | JRA-VAN | 環境物理学 |
| 気温(レース時) | レース時刻の実測気温。暑さによる体力消耗の指標。月より精密 | 中 | 気象庁アメダス | 環境物理学 |
| 風速(レース時) | レース時刻の実測風速(m/s)。空気抵抗に直接影響。スプリントで影響大 | 中 | 気象庁アメダス | 環境物理学 |
| 直線向かい風成分 | 風向×コース直線方角のcos値×風速。直線での脚質有利不利に影響 | 中 | 気象庁アメダス+コース方角 | 環境物理学 |
| 含水率推定値 | 直近48h降水量-蒸発量推定。馬場状態(4段階)より精密な連続値 | 高 | 気象庁データから計算 | 環境物理学 |
| 風速×馬体重 | 大きい馬は風の影響を受けにくい(空気抵抗/質量∝mass^-1/3)交互作用 | 中 | 計算値 | 環境物理学 |

### 血統系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| | | | | |

### 騎手・調教師・馬主系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| 馬主タイプ | 大手クラブ/中小クラブ/オーナーブリーダー/個人大手/個人小規模の5分類。過学習リスクが低いカテゴリ変数 | 中 | JRA-VAN馬主テーブル + 手動分類リスト | 馬主情報の特徴量化 |
| 馬主過去1年勝率 | 当該馬主の過去1年間の勝率。馬の質の代理変数（時間窓必須） | 中 | JRA-VAN成績テーブルから集計 | 馬主情報の特徴量化 |
| 馬主過去1年出走数 | 当該馬主の過去1年間の出走数。馬主の規模・資金力の指標 | 低 | JRA-VAN成績テーブルから集計 | 馬主情報の特徴量化 |
| 馬主過去1年単勝回収率 | 当該馬主の馬の過去1年単勝回収率。応援馬券効果（低い=過剰人気）の指標を兼ねる | 中 | JRA-VAN成績+オッズから集計 | 馬主情報の特徴量化 |

### マクリ・ペースクラッシャー系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| マクリ率(過去N走) | 過去N走でマクリ判定（1角-3角≤-4かつ3角≤5かつ1角≥8）に該当した割合 | 中 | JRA-VAN通過順位から計算 | マクリ・ペースクラッシャー |
| 騎手マクリ率 | 当該騎手の過去1年の全騎乗でのマクリ使用率 | 中 | JRA-VAN通過順位+騎手テーブルから集計 | マクリ・ペースクラッシャー |
| ペースクラッシャー候補度 | マクリ率×騎手マクリ率×条件補正（逃げ馬弱さ、コース、距離変化） | 中 | 計算値 | マクリ・ペースクラッシャー |
| 同レースPC候補数 | 同レースのペースクラッシャー候補度が閾値以上の馬の数。展開リスク指標 | 中 | 計算値 | マクリ・ペースクラッシャー |
| 騎手乗替わりマクリ傾向変化 | 今回騎手のマクリ率 - 前走騎手のマクリ率。正=マクリ傾向増の乗り替わり | 中 | 計算値 | マクリ・ペースクラッシャー |

### 調教系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| | | | | |

### 着順分布・安定度系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| 着順標準偏差(5走) | 過去5走の着順の標準偏差。低い=安定型、高い=一発型 | 低 | JRA-VAN成績テーブルから計算 | 着順分布の形状 |
| 複勝率/勝率比 | 過去成績の複勝率÷勝率。高い=馬券になるが勝てないタイプ、低い=勝つか飛ぶかタイプ | 低 | JRA-VAN成績テーブルから計算 | 着順分布の形状 |
| 過去5走3着内率 | 直近5走で3着以内に入った割合。安定好走型の検出 | 低 | JRA-VAN成績テーブルから計算 | 着順分布の形状 |
| 過去5走二桁着順率 | 直近5走で10着以降だった割合。大敗の頻度＝一発型の指標 | 低 | JRA-VAN成績テーブルから計算 | 着順分布の形状 |
| 最高着順-平均着順差 | 過去の最高着順と平均着順の差。大きい=一発のポテンシャルが高い | 低 | JRA-VAN成績テーブルから計算 | 着順分布の形状 |
| 盛り返し強度(前走) | (最悪ポジション-着順)/(最悪ポジション-最良ポジション)。0=盛り返しなし、1=完全回復。充実度指標 | 低 | JRA-VAN通過順位から計算 | 盛り返しパターン |
| 盛り返し率(過去5走) | 過去5走で盛り返し判定に該当した割合。高い=戦意が強いタイプ | 低 | JRA-VAN通過順位から計算 | 盛り返しパターン |
| ポジション下落度(中盤) | max(3角,4角順位)-min(1角,2角順位)。中盤のポジション下落の大きさ | 低 | JRA-VAN通過順位から計算 | 盛り返しパターン |

### ローテーション・臨戦過程系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| 前走からの中間日数 | 前走出走日から今回出走日までの日数。ローテーションの基本 | 低 | JRA-VAN成績テーブル | ローテーション分析 |
| 間隔カテゴリ(5分類) | 超短(中0-1週)/短(中2-3週)/標準(中4-8週)/長(中9-16週)/超長(中17週以上) | 低 | 計算値 | ローテーション分析 |
| 休養明けN戦目 | 中17週以上の休養後の何戦目か（1戦目/2戦目/3戦目以降）。叩き2戦目の検出 | 低 | 計算値 | ローテーション分析 |
| 今年の出走回数 | 当年1月からの出走回数。使い込み度の指標 | 低 | JRA-VAN成績テーブル | ローテーション分析 |
| 調教師の平均出走間隔 | 当該調教師の管理馬の過去1年平均出走間隔。厩舎のローテ方針 | 中 | JRA-VAN成績テーブルから集計 | ローテーション分析 |
| 間隔-調教師平均間隔差 | 今回の間隔 - 調教師平均間隔。「この厩舎にしては短い/長い」の指標 | 中 | 計算値 | ローテーション分析 |

### パフォーマンス評価系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| 前走1着との着差(秒差) | 前走での1着馬とのタイム差。着順より情報量が多い連続値 | 低 | JRA-VAN成績テーブル | 着順以外の評価 |
| 上がり3F順位vs着順ギャップ | 上がり3F順位 - 着順。正=展開不利（巻き返し候補）、負=展開利 | 低 | JRA-VAN成績テーブルから計算 | 着順以外の評価 |
| 4角通過順位-着順 | 4角の通過順位 - 最終着順。正=終盤で追い上げた（加速力あり） | 低 | JRA-VAN成績テーブルから計算 | 着順以外の評価 |
| クラス補正着順 | 着順にクラスレベル補正を加えた値。異なるクラスの成績を比較可能にする | 中 | 計算値 | 着順以外の評価 |
| スピード指数 | 走破タイムを馬場差・距離で標準化した能力値 | 高 | 計算値（馬場差推定必要） | 着順以外の評価 |
| 前走着差パーセンタイル | 前走着差/最下位着差。頭数・条件に依存しない相対的な着差評価(0-1) | 低 | JRA-VAN成績テーブルから計算 | 着順バイアス |
| 着順-着差順位の乖離 | 着順-(着差ソート順位)。正=着順の割に実は強い（過小評価）| 低 | JRA-VAN成績テーブルから計算 | 着順バイアス |
| レースの接戦度 | (1着〜最下位の着差)/頭数。小さいほど接戦で着順の意味が薄い | 低 | JRA-VAN成績テーブルから計算 | 着順バイアス |

### コンディション系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| | | | | |

### オッズ・市場系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| オッズ乖離度 | AI予測勝率とオッズ逆算勝率の差分。過剰人気・過小評価の検出に使用 | 中 | 計算値（AI予測+オッズ） | 001 |
| 馬主クラブフラグ | 大規模馬主クラブ（バヌーシー、シルク、キャロット等）所有馬かどうか。応援馬券によるオッズ歪みの指標 | 低 | JRA-VAN馬主テーブル | 001 |
| 人気-実力乖離度 | 人気順位とAI予測順位の差。大きいほどオッズが歪んでいる可能性 | 中 | 計算値 | 001 |
| 出走頭数 | レースの出走頭数。ショート戦略のコスト・荒れやすさに影響 | 低 | JRA-VANレーステーブル | 001 |
| 馬券別期待値(EV) | 各馬券（ワイド/複勝/枠連/単勝等）のAI予測確率×オッズ。1.0超を全て購入対象とする | 中 | 計算値（AI予測+オッズ） | 006 |
| EV閾値 | 購入するEVの下限値。低いほど購入点数増・回収率低下・安定性向上 | 低 | パラメータ | 006 |
| バンクロール回転率 | 週あたりの購入金額/バンクロール。高いほど複利効果で利益増大 | 低 | 計算値 | 006 |
| スマートマネー補正 | 最終オッズ→確定オッズの下落予測。的中馬券ほど下がる傾向を補正 | 高 | JRA-VANオッズ時系列 | 007 |
| ワイドEV(全組合せ) | ワイド(A,B)のEV = Σ P(3着=C) × オッズ(A,B when C)。全3着候補で計算 | 高 | 計算値（確率推定+オッズ） | 007 |
| 外国人騎手フラグ | 短期免許外国人騎手の騎乗。AI予測の不確実性を増大させる要因 | 低 | JRA-VAN騎手テーブル | 007 |
| 三連単EV(全組合せ) | 三連単(A,B,C)のEV = P(1着A,2着B,3着C) × オッズ。買い目数が膨大なため計算効率が重要 | 高 | 計算値（確率推定+オッズ） | 012 |
| 無観客開催フラグ | 無観客/入場制限時の開催。応援馬券減少によるオッズ構造の変化を示す | 低 | JRA開催情報 | 012 |

### 運用・税務系

| 特徴量 | 説明 | 実装難度 | データソース | 出典 |
|---|---|---|---|---|
| 購入レース比率 | 年間全レース中の購入レース数の比率。雑所得要件「ほぼ全て」の充足確認（目標80%以上） | 低 | 計算値（購入ログ） | 010 |
| 年間購入点数 | 年間を通じた馬券購入の総点数。雑所得要件「多数」の充足確認 | 低 | 計算値（購入ログ） | 010 |
| 税引後EV | EV × 0.65（雑所得35%税引後）。税引後の真の期待値で購入判断 | 低 | 計算値 | 010 |
| 購入証跡ログ | タイムスタンプ付き購入記録（予測値・EV計算根拠含む）。雑所得の客観性要件を満たす改ざん防止記録 | 中 | システムログ | 010 |
