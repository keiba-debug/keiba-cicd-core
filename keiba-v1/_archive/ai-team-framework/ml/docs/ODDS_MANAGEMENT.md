# ã‚ªãƒƒã‚ºç®¡ç†ã‚¬ã‚¤ãƒ‰

**ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚ªãƒƒã‚ºã®å–å¾—ã¨æ´»ç”¨**

æœŸå¾…å€¤è¨ˆç®—ã«ã¯ã€Œæœ€æ–°ã®ã‚ªãƒƒã‚ºã€ãŒä¸å¯æ¬ ã§ã™ã€‚ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€JRA-VANã‹ã‚‰ã‚ªãƒƒã‚ºã‚’å–å¾—ã—ã€åŠ¹æœçš„ã«æ´»ç”¨ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## ğŸ¯ ã‚ªãƒƒã‚ºã®é‡è¦æ€§

### ãªãœæœ€æ–°ã‚ªãƒƒã‚ºãŒå¿…è¦ã‹

```
ã‚·ãƒŠãƒªã‚ª: äºˆæ¸¬å‹ç‡30%ã®é¦¬

å‰æ—¥å¤œã®ã‚ªãƒƒã‚º: 5.0å€
  æœŸå¾…å€¤ = 0.30 Ã— 5.0 = 150% â†’ è²·ã„ï¼

ç· åˆ‡ç›´å‰ã®ã‚ªãƒƒã‚º: 2.5å€
  æœŸå¾…å€¤ = 0.30 Ã— 2.5 = 75% â†’ è¦‹é€ã‚Š
```

**å¤ã„ã‚ªãƒƒã‚ºã§åˆ¤æ–­ã™ã‚‹ã¨å¤§æã—ã¾ã™ã€‚**

---

## ğŸ“Š JRA-VANã®ã‚ªãƒƒã‚ºãƒ‡ãƒ¼ã‚¿

### å–å¾—å¯èƒ½ãªã‚ªãƒƒã‚ºç¨®åˆ¥

| ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | å†…å®¹ | ãƒ•ã‚¡ã‚¤ãƒ«ä¾‹ |
|-----------|------|-----------|
| **O1** | å˜å‹ãƒ»è¤‡å‹ã‚ªãƒƒã‚º | `O1_20260201_1530.txt` |
| **O2** | é¦¬é€£ã‚ªãƒƒã‚º | `O2_20260201_1530.txt` |
| **O3** | ãƒ¯ã‚¤ãƒ‰ã‚ªãƒƒã‚º | `O3_20260201_1530.txt` |
| **O4** | é¦¬å˜ã‚ªãƒƒã‚º | `O4_20260201_1530.txt` |
| **O5** | ä¸‰é€£è¤‡ã‚ªãƒƒã‚º | `O5_20260201_1530.txt` |
| **O6** | ä¸‰é€£å˜ã‚ªãƒƒã‚º | `O6_20260201_1530.txt` |

### ã‚ªãƒƒã‚ºå–å¾—ã‚¿ã‚¤ãƒŸãƒ³ã‚°

| ã‚¿ã‚¤ãƒŸãƒ³ã‚° | æ™‚åˆ» | ç”¨é€” |
|-----------|------|------|
| å‰æ—¥å¤œã‚ªãƒƒã‚º | é‡‘æ›œ 20:00 | åˆæœŸå€™è£œé¸å®š |
| æœã‚ªãƒƒã‚º | åœŸæ›œ 10:00 | è³¼å…¥å€™è£œçµã‚Šè¾¼ã¿ |
| æ˜¼ã‚ªãƒƒã‚º | åœŸæ›œ 12:00 | ä¸­é–“ç¢ºèª |
| **ç· åˆ‡å‰ã‚ªãƒƒã‚º** | **ãƒ¬ãƒ¼ã‚¹30åˆ†å‰** | **æœ€çµ‚åˆ¤æ–­** |

---

## ğŸ”§ å®Ÿè£…æ–¹å¼ã®é¸æŠ

### ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ vs DB

| é …ç›® | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ | DB |
|------|---------------|-----|
| **å®Ÿè£…ã®å®¹æ˜“ã•** | âœ… ç°¡å˜ | âŒ è¤‡é›‘ |
| **TARGETã¨ã®çµ±ä¸€** | âœ… åŒã˜ä»•çµ„ã¿ | âŒ åˆ¥ç®¡ç† |
| **ã‚¯ã‚¨ãƒªé€Ÿåº¦** | â–³ ã‚„ã‚„é…ã„ | âœ… é«˜é€Ÿ |
| **æ™‚ç³»åˆ—åˆ†æ** | â–³ ã‚„ã‚„é¢å€’ | âœ… å®¹æ˜“ |
| **ä¿å®ˆæ€§** | âœ… ã‚·ãƒ³ãƒ—ãƒ« | â–³ ã‚¹ã‚­ãƒ¼ãƒç®¡ç†å¿…è¦ |

### æ¨å¥¨ï¼šæ®µéšçš„ç§»è¡Œ

```
Phase 1 (ä»Šã™ã)
  â””â”€ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹
      â”œâ”€ JRA-VANã‹ã‚‰ç›´æ¥ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
      â”œâ”€ TARGETã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
      â””â”€ ã‚·ãƒ³ãƒ—ãƒ«ã§å®Ÿè£…ãŒæ—©ã„

Phase 2 (å¿…è¦ã«ãªã£ãŸã‚‰)
  â””â”€ DBåŒ–ã‚’æ¤œè¨
      â”œâ”€ ã‚ªãƒƒã‚ºå¤‰å‹•åˆ†æãŒå¿…è¦ã«ãªã£ãŸæ™‚
      â”œâ”€ å¤§é‡ãƒ¬ãƒ¼ã‚¹ä¸¦è¡Œå‡¦ç†ãŒå¿…è¦ãªæ™‚
      â””â”€ ã‚¯ã‚¨ãƒªæ€§èƒ½ãŒå•é¡Œã«ãªã£ãŸæ™‚
```

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
E:\share\KEIBA-DATA\jv-data\ODDS\
  â”œâ”€ O1_20260201_1000.txt  # æœã‚ªãƒƒã‚ºï¼ˆå˜å‹ãƒ»è¤‡å‹ï¼‰
  â”œâ”€ O1_20260201_1200.txt  # æ˜¼ã‚ªãƒƒã‚º
  â”œâ”€ O1_20260201_1400.txt  # åˆå¾Œã‚ªãƒƒã‚º
  â”œâ”€ O1_20260201_1530.txt  # ç· åˆ‡å‰ã‚ªãƒƒã‚º â˜…æœ€é‡è¦
  â”œâ”€ O2_20260201_1530.txt  # é¦¬é€£ã‚ªãƒƒã‚º
  â””â”€ ...
```

### ã‚ªãƒƒã‚ºå–å¾—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

**PowerShell**: `scripts/fetch_odds.ps1`

```powershell
# ã‚ªãƒƒã‚ºå–å¾—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
# ä½¿ç”¨ä¾‹: .\fetch_odds.ps1 -Date "20260201" -Time "1530"

param(
    [string]$Date = (Get-Date -Format "yyyyMMdd"),
    [string]$Time = (Get-Date -Format "HHmm")
)

$JVDataRoot = "E:\share\KEIBA-DATA\jv-data"
$OddsDir = "$JVDataRoot\ODDS"

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
if (-not (Test-Path $OddsDir)) {
    New-Item -ItemType Directory -Path $OddsDir
}

# JVLinkã§ã‚ªãƒƒã‚ºå–å¾—
Write-Host "ã‚ªãƒƒã‚ºå–å¾—ä¸­: $Date $Time"

# DIFFé…ä¿¡ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚ªãƒƒã‚ºå–å¾—
JVLink.exe -dataspec "DIFF O1 O2" -fromdate $Date -todate $Date

# å–å¾—ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã§ãƒªãƒãƒ¼ãƒ 
$SourceO1 = "$JVDataRoot\O1.txt"
$SourceO2 = "$JVDataRoot\O2.txt"

if (Test-Path $SourceO1) {
    $DestO1 = "$OddsDir\O1_${Date}_${Time}.txt"
    Move-Item -Path $SourceO1 -Destination $DestO1 -Force
    Write-Host "âœ“ å˜å‹ãƒ»è¤‡å‹ã‚ªãƒƒã‚ºä¿å­˜: $DestO1"
}

if (Test-Path $SourceO2) {
    $DestO2 = "$OddsDir\O2_${Date}_${Time}.txt"
    Move-Item -Path $SourceO2 -Destination $DestO2 -Force
    Write-Host "âœ“ é¦¬é€£ã‚ªãƒƒã‚ºä¿å­˜: $DestO2"
}

Write-Host "ã‚ªãƒƒã‚ºå–å¾—å®Œäº†"
```

### å®šæœŸå®Ÿè¡Œï¼ˆã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ï¼‰

**åœŸæ›œæ—¥ã®è‡ªå‹•å–å¾—**:

```
10:00 - æœã‚ªãƒƒã‚º
12:00 - æ˜¼ã‚ªãƒƒã‚º
14:00 - åˆå¾Œã‚ªãƒƒã‚º
15:25 - ç· åˆ‡å‰ã‚ªãƒƒã‚º (1Rç›´å‰)
15:55 - ç· åˆ‡å‰ã‚ªãƒƒã‚º (2Rç›´å‰)
...
```

**Windows ã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©è¨­å®š**:

```powershell
# ã‚¿ã‚¹ã‚¯ä½œæˆä¾‹ï¼ˆåœŸæ›œ10:00ã«å®Ÿè¡Œï¼‰
$Action = New-ScheduledTaskAction -Execute "powershell.exe" `
    -Argument "-File E:\share\KEIBA-CICD\_keiba\scripts\fetch_odds.ps1 -Time 1000"

$Trigger = New-ScheduledTaskTrigger -Weekly -DaysOfWeek Saturday -At 10:00AM

Register-ScheduledTask -TaskName "FetchOdds_Saturday_1000" `
    -Action $Action -Trigger $Trigger -Description "åœŸæ›œæœã‚ªãƒƒã‚ºå–å¾—"
```

---

## ğŸ Pythonã§ã®ã‚ªãƒƒã‚ºåˆ©ç”¨

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```python
from ml.betting.odds_manager import OddsManager

# ã‚ªãƒƒã‚ºãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼åˆæœŸåŒ–
manager = OddsManager()

# æœ€æ–°ã‚ªãƒƒã‚ºã‚’å–å¾—
race_id = "2026020105010211"
race_date = "20260201"

odds = manager.get_race_odds(race_id, race_date, snapshot_time="latest")

# ç‰¹å®šã®é¦¬ã®ã‚ªãƒƒã‚º
horse_odds = manager.get_horse_odds(race_id, race_date, umaban="01", snapshot_time="closing")

print(f"1ç•ªã®å˜å‹ã‚ªãƒƒã‚º: {horse_odds['win_odds']:.1f}å€")
```

### æœŸå¾…å€¤è¨ˆç®—ã¨ã®çµ±åˆ

```python
from ml.betting.odds_manager import OddsManager
from ml.betting.evaluator import ExpectedValueCalculator

# ã‚ªãƒƒã‚ºå–å¾—
manager = OddsManager()
odds = manager.get_race_odds(race_id, race_date, snapshot_time="closing")

# æœŸå¾…å€¤è¨ˆç®—
calculator = ExpectedValueCalculator()

for umaban, odds_data in odds.items():
    # äºˆæ¸¬ç¢ºç‡ï¼ˆMLãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å–å¾—ï¼‰
    prob = predictions[umaban]['prob']

    # æœŸå¾…å€¤è¨ˆç®—
    ev = calculator.calculate_win(prob, odds_data['win_odds'])

    print(f"{umaban}ç•ª: æœŸå¾…å€¤ {ev:.1%}")
```

---

## ğŸ“ˆ 2æ®µéšåˆ¤æ–­ã‚·ã‚¹ãƒ†ãƒ 

ç¾å®Ÿçš„ãªã‚ªãƒƒã‚ºå–å¾—ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è€ƒæ…®ã—ãŸè³¼å…¥åˆ¤æ–­ãƒ•ãƒ­ãƒ¼ã€‚

### ãƒ•ãƒ­ãƒ¼å›³

```
é‡‘æ›œå¤œ (20:00)
  â”œâ”€ äºˆæƒ³ãƒ¢ãƒ‡ãƒ«å®Ÿè¡Œ â†’ å‹ç‡äºˆæ¸¬
  â”œâ”€ å‰æ—¥å¤œã‚ªãƒƒã‚ºå–å¾—ï¼ˆåˆå›ç™ºè¡¨ï¼‰
  â””â”€ æœŸå¾…å€¤è¨ˆç®— â†’ ã€Œå€™è£œé¦¬ãƒªã‚¹ãƒˆã€ä½œæˆ
      â†“
åœŸæ›œæœ (10:00)
  â”œâ”€ æœã‚ªãƒƒã‚ºå–å¾—
  â”œâ”€ æœŸå¾…å€¤å†è¨ˆç®—
  â””â”€ å€™è£œé¦¬ã‚’çµã‚Šè¾¼ã¿ â†’ ã€Œè³¼å…¥å€™è£œãƒªã‚¹ãƒˆã€
      â†“
ãƒ¬ãƒ¼ã‚¹30åˆ†å‰ (ä¾‹: 15:05)
  â”œâ”€ ç· åˆ‡å‰ã‚ªãƒƒã‚ºå–å¾— â˜…æœ€é‡è¦
  â”œâ”€ æœ€çµ‚æœŸå¾…å€¤è¨ˆç®—
  â”œâ”€ ã‚±ãƒªãƒ¼åŸºæº–ã§è³­ã‘é‡‘è¨ˆç®—
  â””â”€ ã€Œè³¼å…¥ç¢ºå®šã€ or ã€Œè¦‹é€ã‚Šã€
      â†“
äººé–“ãŒæ‰¿èª â†’ è³¼å…¥å®Ÿè¡Œ
```

### Pythonå®Ÿè£…

```python
from datetime import datetime
from ml.betting.odds_manager import OddsManager
from ml.betting.decision_engine import BettingDecisionEngine

def two_stage_decision(race_id: str, race_date: str, predictions: dict):
    """
    2æ®µéšåˆ¤æ–­ã‚·ã‚¹ãƒ†ãƒ 

    Args:
        race_id: ãƒ¬ãƒ¼ã‚¹ID
        race_date: ãƒ¬ãƒ¼ã‚¹æ—¥ä»˜ï¼ˆYYYYMMDDï¼‰
        predictions: {umaban: {'prob': float}}

    Returns:
        è³¼å…¥æ¨å¥¨ãƒªã‚¹ãƒˆ
    """
    manager = OddsManager()
    engine = BettingDecisionEngine()

    # === Stage 1: å€™è£œé¸å®šï¼ˆå‰æ—¥å¤œï¼‰ ===
    print("=== Stage 1: å€™è£œé¸å®šï¼ˆå‰æ—¥å¤œã‚ªãƒƒã‚ºï¼‰ ===")

    # å‰æ—¥å¤œã‚ªãƒƒã‚ºå–å¾—ï¼ˆä»®ã«é‡‘æ›œ20:00ã®ã‚ªãƒƒã‚ºï¼‰
    # å®Ÿéš›ã«ã¯å‰æ—¥å¤œã«å–å¾—ã—ãŸã‚‚ã®ã‚’ä½¿ç”¨
    night_odds = manager.get_race_odds(race_id, race_date, snapshot_time="2000")

    candidates = []
    for umaban, pred in predictions.items():
        odds_data = night_odds.get(umaban)
        if not odds_data:
            continue

        # æœŸå¾…å€¤è¨ˆç®—
        ev_rate = pred['prob'] * odds_data['win_odds']

        # æœŸå¾…å€¤120%ä»¥ä¸Šã‚’å€™è£œã«
        if ev_rate >= 1.20:
            candidates.append({
                'umaban': umaban,
                'prob': pred['prob'],
                'night_odds': odds_data['win_odds'],
                'night_ev': ev_rate
            })

    print(f"å€™è£œé¦¬: {len(candidates)}é ­")

    # === Stage 2: æœ€çµ‚åˆ¤æ–­ï¼ˆç· åˆ‡å‰ï¼‰ ===
    print("\n=== Stage 2: æœ€çµ‚åˆ¤æ–­ï¼ˆç· åˆ‡å‰ã‚ªãƒƒã‚ºï¼‰ ===")

    # ç· åˆ‡å‰ã‚ªãƒƒã‚ºå–å¾—ï¼ˆãƒ¬ãƒ¼ã‚¹30åˆ†å‰ï¼‰
    closing_odds = manager.get_race_odds(race_id, race_date, snapshot_time="closing")

    final_recommendations = []
    for candidate in candidates:
        umaban = candidate['umaban']
        prob = candidate['prob']

        closing_odds_data = closing_odds.get(umaban)
        if not closing_odds_data:
            continue

        closing_odds_value = closing_odds_data['win_odds']

        # æœ€çµ‚æœŸå¾…å€¤è¨ˆç®—
        rec = engine.evaluate_bet(
            horse_name=f"{umaban}ç•ª",
            prob=prob,
            odds=closing_odds_value
        )

        if rec.should_bet:
            final_recommendations.append({
                'umaban': umaban,
                'prob': prob,
                'night_odds': candidate['night_odds'],
                'closing_odds': closing_odds_value,
                'odds_change': closing_odds_value - candidate['night_odds'],
                'final_ev': rec.expected_value_rate,
                'bet_amount': rec.bet_amount,
                'reason': rec.reason
            })

    print(f"è³¼å…¥æ¨å¥¨: {len(final_recommendations)}é ­")

    return final_recommendations


# ä½¿ç”¨ä¾‹
race_id = "2026020105010211"
race_date = "20260201"

predictions = {
    "01": {"prob": 0.25},
    "03": {"prob": 0.18},
    "05": {"prob": 0.30},
}

recommendations = two_stage_decision(race_id, race_date, predictions)

for rec in recommendations:
    print(f"\n{rec['umaban']}ç•ª:")
    print(f"  äºˆæ¸¬å‹ç‡: {rec['prob']:.1%}")
    print(f"  å‰æ—¥ã‚ªãƒƒã‚º: {rec['night_odds']:.1f}å€")
    print(f"  ç· åˆ‡å‰ã‚ªãƒƒã‚º: {rec['closing_odds']:.1f}å€")
    print(f"  ã‚ªãƒƒã‚ºå¤‰å‹•: {rec['odds_change']:+.1f}å€")
    print(f"  æœ€çµ‚æœŸå¾…å€¤: {rec['final_ev']:.1%}")
    print(f"  æ¨å¥¨è³­ã‘é‡‘: {rec['bet_amount']}å††")
```

---

## ğŸ“Š DBåŒ–ã™ã‚‹å ´åˆã®è¨­è¨ˆ

å°†æ¥çš„ã«å¿…è¦ã«ãªã£ãŸå ´åˆã®å‚è€ƒã€‚

### ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```sql
-- ã‚ªãƒƒã‚ºã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ
CREATE TABLE odds_snapshots (
    id SERIAL PRIMARY KEY,
    race_id VARCHAR(16) NOT NULL,
    umaban CHAR(2) NOT NULL,
    snapshot_time TIMESTAMP NOT NULL,
    win_odds DECIMAL(6,2),
    place_odds_min DECIMAL(6,2),
    place_odds_max DECIMAL(6,2),
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_race_snapshot ON odds_snapshots(race_id, snapshot_time);
CREATE INDEX idx_race_umaban ON odds_snapshots(race_id, umaban);

-- ã‚ªãƒƒã‚ºå¤‰å‹•çµ±è¨ˆ
CREATE TABLE odds_volatility (
    race_id VARCHAR(16) PRIMARY KEY,
    umaban CHAR(2),
    first_odds DECIMAL(6,2),      -- åˆå›ç™ºè¡¨
    morning_odds DECIMAL(6,2),     -- æœã‚ªãƒƒã‚º
    closing_odds DECIMAL(6,2),     -- ç· åˆ‡å‰
    max_odds DECIMAL(6,2),         -- æœ€é«˜å€¤
    min_odds DECIMAL(6,2),         -- æœ€ä½å€¤
    volatility DECIMAL(6,2)        -- å¤‰å‹•ç‡
);
```

### SQLiteã§è»½é‡DB

PostgreSQLã‚„MySQLã¯å¤§ã’ã•ãªã®ã§ã€SQLiteã§ååˆ†ã€‚

```python
import sqlite3
from pathlib import Path

class OddsDatabase:
    """SQLiteãƒ™ãƒ¼ã‚¹ã®ã‚ªãƒƒã‚ºDB"""

    def __init__(self, db_path: Path = None):
        self.db_path = db_path or Path("ml/data/odds.db")
        self.conn = sqlite3.connect(self.db_path)
        self._create_tables()

    def _create_tables(self):
        """ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ"""
        self.conn.execute("""
            CREATE TABLE IF NOT EXISTS odds_snapshots (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                race_id TEXT NOT NULL,
                umaban TEXT NOT NULL,
                snapshot_time TEXT NOT NULL,
                win_odds REAL,
                place_odds_min REAL,
                place_odds_max REAL,
                created_at TEXT DEFAULT CURRENT_TIMESTAMP
            )
        """)

        self.conn.execute("""
            CREATE INDEX IF NOT EXISTS idx_race_snapshot
            ON odds_snapshots(race_id, snapshot_time)
        """)

    def insert_snapshot(self, race_id: str, umaban: str, snapshot_time: str, odds: dict):
        """ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæŒ¿å…¥"""
        self.conn.execute("""
            INSERT INTO odds_snapshots (race_id, umaban, snapshot_time, win_odds, place_odds_min, place_odds_max)
            VALUES (?, ?, ?, ?, ?, ?)
        """, (race_id, umaban, snapshot_time, odds['win_odds'], odds['place_odds_min'], odds['place_odds_max']))

        self.conn.commit()

    def get_latest_odds(self, race_id: str):
        """æœ€æ–°ã‚ªãƒƒã‚ºå–å¾—"""
        cursor = self.conn.execute("""
            SELECT umaban, win_odds, place_odds_min, place_odds_max
            FROM odds_snapshots
            WHERE race_id = ?
            ORDER BY snapshot_time DESC
            LIMIT 18
        """, (race_id,))

        return {row[0]: {'win_odds': row[1], 'place_odds_min': row[2], 'place_odds_max': row[3]} for row in cursor}
```

---

## ğŸ¯ æ¨å¥¨äº‹é …

### ä»Šã™ãã‚„ã‚‹ã“ã¨

1. **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã§é–‹å§‹**
   - `E:\share\KEIBA-DATA\jv-data\ODDS\` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
   - ã‚ªãƒƒã‚ºå–å¾—ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ
   - ã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©è¨­å®š

2. **OddsManagerã®æ´»ç”¨**
   - `ml/betting/odds_manager.py` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
   - æœ€æ–°ã‚ªãƒƒã‚ºå–å¾—ãƒ†ã‚¹ãƒˆ
   - æœŸå¾…å€¤è¨ˆç®—ã¨çµ±åˆ

3. **2æ®µéšåˆ¤æ–­ã®å®Ÿè£…**
   - å‰æ—¥å¤œã«å€™è£œé¸å®š
   - ç· åˆ‡å‰ã«æœ€çµ‚åˆ¤æ–­
   - äººé–“æ‰¿èªãƒ•ãƒ­ãƒ¼

### å°†æ¥çš„ã«æ¤œè¨

1. **ã‚ªãƒƒã‚ºå¤‰å‹•åˆ†æ**
   - äººæ°—é¦¬ã®ã‚ªãƒƒã‚ºä¸‹è½ãƒ‘ã‚¿ãƒ¼ãƒ³
   - ç©´é¦¬ã®ã‚ªãƒƒã‚ºä¸Šæ˜‡ãƒ‘ã‚¿ãƒ¼ãƒ³
   - æœ€é©ãªè³¼å…¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¤å®š

2. **DBåŒ–**
   - æ™‚ç³»åˆ—åˆ†æãŒé‡è¦ã«ãªã£ãŸã‚‰
   - SQLiteã§è»½é‡å®Ÿè£…

3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ API**
   - JRAå…¬å¼APIãŒåˆ©ç”¨å¯èƒ½ã«ãªã£ãŸã‚‰
   - WebSocketçµŒç”±ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å–å¾—

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [BETTING_STRATEGY_FRAMEWORK.md](./BETTING_STRATEGY_FRAMEWORK.md) - è³¼å…¥æˆ¦ç•¥è©³ç´°
- [EXPERT_SYSTEM_ARCHITECTURE.md](../../ai-team/knowledge/EXPERT_SYSTEM_ARCHITECTURE.md) - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ§‹æˆ

---

*ä½œæˆæ—¥: 2026-01-30*
*ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0*
