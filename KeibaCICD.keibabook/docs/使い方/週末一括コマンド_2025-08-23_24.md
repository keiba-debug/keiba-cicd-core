# 週末一括コマンド（2025-08-23/24）

今週頻用する、8/23・8/24のデータ取得からMD新聞（Markdown）生成までの実行コマンド集です。

## ✅ 完全自動フロー（推奨）

```powershell
python -m src.fast_batch_cli full --start 2025/08/24 --end 2025/08/24 --delay 0.5 --max-workers 8
python -m src.integrator_cli batch --start-date 2025/08/24 --end-date 2025/08/24
python -m src.markdown_cli batch --date 2025/08/24 --organized
python -m src.organizer_cli organize --copy --delete-original
python -m src.organizer_cli index
```

```
python -m src.fast_batch_cli data --start 2025/08/23 --end 2025/08/23 --data-types paddok,seiseki --delay 0.5 --max-workers 8   
python -m src.integrator_cli batch --date 2025/08/23
python -m src.markdown_cli batch --date 2025/08/23 --organized
```


## 📅 個別日付フロー（必要に応じて）

```powershell
# 8/23のみ
python -m src.fast_batch_cli full --start 2025/08/23 --end 2025/08/23 --delay 0.5 --max-workers 8
python -m src.integrator_cli batch --date 2025/08/23
python -m src.markdown_cli batch --date 2025/08/23 --organized

# 8/24のみ
python -m src.fast_batch_cli full --start 2025/08/24 --end 2025/08/24 --delay 0.5 --max-workers 8
python -m src.integrator_cli batch --date 2025/08/24
python -m src.markdown_cli batch --date 2025/08/24 --organized
```

## 🔄 パドック情報の定期更新（任意）

```powershell
# 5分間隔で20回更新（8/23）
python -m src.paddock_updater --date 2025/08/23 --continuous --interval 300 --max-iterations 20

# 5分間隔で20回更新（8/24）
python -m src.paddock_updater --date 2025/08/24 --continuous --interval 300 --max-iterations 20
```

## 🧯 トラブル時の再取得・再生成（例）

```powershell
# 例: shutsubaのみ再取得 → 統合 → Markdown再生成（8/23）
python -m src.fast_batch_cli data --start 2025/08/23 --end 2025/08/23 --data-types shutsuba
python -m src.integrator_cli batch --date 2025/08/23
python -m src.markdown_cli batch --date 2025/08/23 --organized

# 8/24も同様に必要分だけ実行
python -m src.fast_batch_cli data --start 2025/08/24 --end 2025/08/24 --data-types shutsuba
python -m src.integrator_cli batch --date 2025/08/24
python -m src.markdown_cli batch --date 2025/08/24 --organized
```

## 📁 出力先

- organized配下に日付・競馬場別で生成されます。
  - 例: `Z:/KEIBA-CICD/data/organized/2025/08/23/札幌/2025********.md`

## 🔎 ヒント

- データフロー: `temp → integrated → organized`
- 日付は固定値（2025/08/23, 2025/08/24）を明示。サブシェルや変数置換は未使用。

---
## 🟦 PowerShell 一括スクリプト（run_daily.ps1）

```powershell
# 単日（8/24）
powershell -ExecutionPolicy Bypass -File .\keiba-cicd-core\tools\run_daily.ps1 -Date 2025/08/24

# 週末2日間（8/23-8/24）
powershell -ExecutionPolicy Bypass -File .\keiba-cicd-core\tools\run_daily.ps1 -Date 2025/08/23 -EndDate 2025/08/24 -Delay 0.5 -MaxWorkers 8
```
- 出力は organized 配下に作成されます（organize/index まで自動実行）。
- `-SkipOrganize` を付けると整理・インデックス作成をスキップできます。


